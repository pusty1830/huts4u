{"version":3,"file":"static/js/315.2d3d430c.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/Person.js","pages/Home Section/HotelCardCarousel.tsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4\"\n}), 'Person');","import { LocationOn, Person } from \"@mui/icons-material\";\r\nimport {\r\n  Box,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  Rating,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport Slider from \"react-slick\";\r\nimport color from \"../../components/color\";\r\nimport { CustomNextArrow, useScreenSize } from \"../../components/style\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  getAllHotels,\r\n  getMyAllHotelswithBelongsTo,\r\n} from \"../../services/services\";\r\nimport dayjs from \"dayjs\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n// ðŸ’° Full price breakdown\r\n// final = base\r\n//       + 13% platform fee\r\n//       + 5% GST on base\r\n//       + 18% GST on platform fee\r\nconst calculatePriceBreakdown = (basePrice: number) => {\r\n  const numericBase = Number(basePrice) || 0;\r\n\r\n  if (!numericBase || numericBase <= 0) {\r\n    return {\r\n      basePrice: 0,\r\n      platformFee: 0,\r\n      gstOnBase: 0,\r\n      gstOnPlatform: 0,\r\n      gstTotal: 0,\r\n      finalPrice: 0,\r\n    };\r\n  }\r\n\r\n  const platformFee = numericBase * 0.13; // 13% of original\r\n  const gstOnBase = numericBase * 0.05; // 5% of original\r\n  const gstOnPlatform = platformFee * 0.18; // 18% of platform fee\r\n  const gstTotal = gstOnBase + gstOnPlatform;\r\n  const finalPrice = numericBase + platformFee + gstTotal;\r\n\r\n  return {\r\n    basePrice: numericBase,\r\n    platformFee,\r\n    gstOnBase,\r\n    gstOnPlatform,\r\n    gstTotal,\r\n    finalPrice,\r\n  };\r\n};\r\n\r\n// ðŸ‘‰ Find the lowest non-zero rate + its label for a hotel\r\nconst getBaseRateInfo = (hotel: any) => {\r\n  const firstRoom = hotel?.rooms?.[0];\r\n  if (!firstRoom) {\r\n    return { rate: 0, label: \"\" };\r\n  }\r\n\r\n  const options = [\r\n    { rate: Number(firstRoom.rateFor3Hour || 0), label: \"per 3 hour\" },\r\n    { rate: Number(firstRoom.rateFor6Hour || 0), label: \"per 6 hour\" },\r\n    { rate: Number(firstRoom.rateFor12Hour || 0), label: \"per 12 hour\" },\r\n    { rate: Number(firstRoom.rateFor1Night || 0), label: \"per night\" },\r\n  ].filter((item) => item.rate > 0);\r\n\r\n  if (!options.length) {\r\n    return { rate: 0, label: \"\" };\r\n  }\r\n\r\n  const lowest = options.reduce((min, cur) =>\r\n    cur.rate < min.rate ? cur : min\r\n  );\r\n\r\n  return lowest; // { rate, label }\r\n};\r\n\r\nconst HotelCardCarousel = () => {\r\n  const { isBelow400px } = useScreenSize();\r\n  const [mergedData, setMergedData] = useState<any[]>([]);\r\n  const settings = {\r\n    dots: false,\r\n    infinite: true,\r\n    speed: 500,\r\n    slidesToShow: 3,\r\n    slidesToScroll: 1,\r\n    nextArrow: <CustomNextArrow />,\r\n    responsive: [\r\n      {\r\n        breakpoint: 1024,\r\n        settings: {\r\n          slidesToShow: 2,\r\n        },\r\n      },\r\n      {\r\n        breakpoint: 600,\r\n        settings: {\r\n          slidesToShow: 1,\r\n        },\r\n      },\r\n    ],\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchHotelsWithRooms = async () => {\r\n      try {\r\n        const hotelPayload = {\r\n          data: { filter: \"\", status: \"Approved\" },\r\n          page: 0,\r\n          pageSize: 50,\r\n          order: [[\"createdAt\", \"ASC\"]],\r\n        };\r\n        const hotelRes = await getAllHotels(hotelPayload);\r\n        const hotelData = hotelRes?.data?.data?.rows || [];\r\n        const hotelIds = hotelData.map((hotel: any) => hotel.id);\r\n\r\n        let mergedData: any[] = [];\r\n        for (const hotelId of hotelIds) {\r\n          const belongsToPayload = {\r\n            id: hotelId,\r\n            secondTable: \"Room\",\r\n          };\r\n\r\n          const hotelWithRoomsRes = await getMyAllHotelswithBelongsTo(\r\n            belongsToPayload\r\n          );\r\n          const hotelWithRooms = hotelWithRoomsRes?.data || null;\r\n\r\n          if (hotelWithRooms) {\r\n            mergedData.push(hotelWithRooms?.data?.[0]);\r\n          }\r\n        }\r\n\r\n        const sortedHotels = mergedData\r\n          .sort((a, b) => b.ratings.rating - a.ratings.rating)\r\n          .slice(0, 10);\r\n\r\n        setMergedData(sortedHotels);\r\n      } catch (error) {\r\n        console.error(\"Error fetching hotels with rooms:\", error);\r\n      }\r\n    };\r\n\r\n    fetchHotelsWithRooms();\r\n  }, []);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleClick = (hotel: any) => {\r\n    const searchData = {\r\n      bookingType: hotel.rooms[0].stayType.toLowerCase(),\r\n      time: dayjs().format(\"HH:mm\"),\r\n      checkinDate: dayjs(),\r\n      checkOutDate: dayjs(),\r\n      rooms: 1,\r\n      adults: 2,\r\n      children: 0,\r\n    };\r\n    const queryParams = new URLSearchParams();\r\n\r\n    Object.entries(searchData).forEach(([key, value]) => {\r\n      if (value !== undefined && value !== null) {\r\n        queryParams.append(key, String(value));\r\n      }\r\n    });\r\n\r\n    navigate(`/hotel/${hotel.id}?${queryParams.toString()}`, {\r\n      state: { hotelData: hotel },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Slider {...settings}>\r\n      {mergedData.map((hotel: any) => {\r\n        const { rate: baseRate, label } = getBaseRateInfo(hotel);\r\n        const { finalPrice, platformFee, gstTotal } =\r\n          calculatePriceBreakdown(baseRate);\r\n\r\n        return (\r\n          <Box\r\n            p={2}\r\n            key={hotel.id}\r\n            display={\"flex\"}\r\n            alignItems={\"center\"}\r\n          >\r\n            <Card\r\n              onClick={() => handleClick(hotel)}\r\n              sx={{\r\n                width: isBelow400px ? \"300px\" : \"320px\",\r\n                boxShadow: \"none\",\r\n                borderRadius: \"12px\",\r\n                border: \"solid 3px\",\r\n                borderColor: color.firstColor,\r\n                position: \"relative\",\r\n              }}\r\n            >\r\n              <Typography\r\n                sx={{\r\n                  position: \"absolute\",\r\n                  top: 0,\r\n                  right: 0,\r\n                  px: 1.5,\r\n                  background: color.background,\r\n                  color: \"white\",\r\n                  borderRadius: \"0px 0px 0px 12px\",\r\n                  fontSize: \"14px\",\r\n                  pb: 0.3,\r\n                }}\r\n              >\r\n                Featured\r\n              </Typography>\r\n\r\n              <CardMedia\r\n                component=\"img\"\r\n                height=\"200\"\r\n                image={hotel.propertyImages[0]}\r\n                alt={hotel.propertyName}\r\n              />\r\n              <CardContent>\r\n                <Box display=\"flex\" alignItems=\"center\" mb={1}>\r\n                  <Rating\r\n                    value={hotel.ratings.rating}\r\n                    precision={0.1}\r\n                    readOnly\r\n                  />\r\n                  <Typography\r\n                    sx={{\r\n                      fontSize: \"16px\",\r\n                      color: color.secondColor,\r\n                      ml: 1,\r\n                    }}\r\n                  >\r\n                    {hotel.ratings.rating}\r\n                  </Typography>\r\n                </Box>\r\n\r\n                <Typography\r\n                  sx={{\r\n                    fontFamily: \"CustomFontB\",\r\n                    mb: 0.5,\r\n                  }}\r\n                  variant=\"h6\"\r\n                >\r\n                  {hotel.propertyName}\r\n                </Typography>\r\n\r\n                {/* ðŸ’° Final price with platform + GST */}\r\n                <Typography variant=\"h6\">\r\n                  â‚¹{finalPrice.toFixed(0)}{\" \"}\r\n                  <span\r\n                    style={{ fontSize: \"14px\", fontWeight: \"bold\" }}\r\n                  >\r\n                    {label}\r\n                  </span>\r\n                </Typography>\r\n                <Typography\r\n                  sx={{ fontSize: \"12px\", color: \"#555\", mt: 0.2 }}\r\n                >\r\n                  Includes â‚¹\r\n                  {(platformFee + gstTotal).toFixed(0)} fees & GST\r\n                </Typography>\r\n\r\n                <Box\r\n                  display={\"flex\"}\r\n                  justifyContent={\"space-between\"}\r\n                  sx={{\r\n                    background: color.background,\r\n                    mt: 1.5,\r\n                    p: 1,\r\n                    py: 1.5,\r\n                    borderRadius: \"12px\",\r\n                  }}\r\n                >\r\n                  <Typography\r\n                    sx={{\r\n                      fontSize: \"12px\",\r\n                      color: \"white\",\r\n                      px: 2,\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <LocationOn\r\n                      style={{ fontSize: \"18px\", paddingRight: \"4px\" }}\r\n                    />{\" \"}\r\n                    {hotel.city}\r\n                  </Typography>\r\n                  <Typography\r\n                    sx={{\r\n                      fontSize: \"12px\",\r\n                      color: \"white\",\r\n                      px: 2,\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                    }}\r\n                  >\r\n                    <Person\r\n                      style={{ fontSize: \"18px\", paddingRight: \"4px\" }}\r\n                    />{\" \"}\r\n                    {hotel.rooms[0].standardRoomOccupancy}\r\n                  </Typography>\r\n                </Box>\r\n              </CardContent>\r\n            </Card>\r\n          </Box>\r\n        );\r\n      })}\r\n    </Slider>\r\n  );\r\n};\r\n\r\nexport default HotelCardCarousel;\r\n"],"names":["createSvgIcon","_jsx","d","HotelCardCarousel","isBelow400px","useScreenSize","mergedData","setMergedData","useState","settings","dots","infinite","speed","slidesToShow","slidesToScroll","nextArrow","CustomNextArrow","responsive","breakpoint","useEffect","async","_hotelRes$data","_hotelRes$data$data","hotelPayload","data","filter","status","page","pageSize","order","hotelRes","getAllHotels","hotelIds","rows","map","hotel","id","hotelId","belongsToPayload","secondTable","hotelWithRoomsRes","getMyAllHotelswithBelongsTo","hotelWithRooms","_hotelWithRooms$data","push","sortedHotels","sort","a","b","ratings","rating","slice","error","console","fetchHotelsWithRooms","navigate","useNavigate","Slider","children","rate","baseRate","label","_hotel$rooms","firstRoom","rooms","options","Number","rateFor3Hour","rateFor6Hour","rateFor12Hour","rateFor1Night","item","length","reduce","min","cur","getBaseRateInfo","finalPrice","platformFee","gstTotal","basePrice","numericBase","gstOnBase","gstOnPlatform","calculatePriceBreakdown","Box","p","display","alignItems","_jsxs","Card","onClick","searchData","bookingType","stayType","toLowerCase","time","dayjs","format","checkinDate","checkOutDate","adults","queryParams","URLSearchParams","Object","entries","forEach","_ref","key","value","undefined","append","String","toString","state","hotelData","handleClick","sx","width","boxShadow","borderRadius","border","borderColor","color","firstColor","position","Typography","top","right","px","background","fontSize","pb","CardMedia","component","height","image","propertyImages","alt","propertyName","CardContent","mb","Rating","precision","readOnly","secondColor","ml","fontFamily","variant","toFixed","style","fontWeight","mt","justifyContent","py","LocationOn","paddingRight","city","Person","standardRoomOccupancy"],"sourceRoot":""}