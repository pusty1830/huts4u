"use strict";(self.webpackChunkhuts4u=self.webpackChunkhuts4u||[]).push([[912],{8881:(e,t,r)=>{r.d(t,{A:()=>f});var o=r(65043),n=r(7353),s=r(94496),i=r(53193),a=r(11906),l=r(79650),d=r(61596),c=r(71806),h=r(84882),u=r(28076),x=r(10039),p=r(73460),g=r(81045),A=r(43845),b=r(33580),m=r(69995),v=r(70579);const f=e=>{let{bookings:t=[],hotelId:r,onCheckIn:f,onCheckOut:j}=e;const[k,y]=(0,o.useState)(null),[w,C]=(0,o.useState)(!1),[S,I]=(0,o.useState)(t),[R,z]=(0,o.useState)([]);(0,o.useEffect)((()=>{I(t)}),[t]),(0,o.useEffect)((()=>{let e=!0;if(r)return C(!0),(0,m.hb)(r).then((t=>{var r,o,n;if(!e)return;const s=null!==(r=null===t||void 0===t||null===(o=t.data)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.roomAvailable)&&void 0!==r?r:"Unavailable";y(s)})).catch((()=>{e&&y("Unavailable")})).finally((()=>{e&&C(!1)})),()=>{e=!1};y(null)}),[r]);const D=e=>{const t=(e.status||"").toLowerCase();return"pending"===t||"booked"===t},M=e=>"checkedin"===(e.status||"").toLowerCase(),N=(e,t)=>{z((r=>t?r.includes(e)?r:[...r,e]:r.filter((t=>t!==e))))},O=e=>{const t=e.toLowerCase();return"checkedin"===t?"rgba(163,228,215,0.8)":"checkedout"===t?"rgba(245,183,177,0.9)":"rgba(0,0,0,0.08)"},T=async(e,t)=>{const r=S.map((e=>({...e})));N(e,!0),I((r=>r.map((r=>r.id===e?{...r,status:t,statusColor:O(t)}:r))));try{await(0,m.ik)(e,{status:t}),"checkedIn"===t?null===f||void 0===f||f(e):"checkedOut"===t&&(null===j||void 0===j||j(e))}catch(o){console.error("Failed to update booking status",o),I(r)}finally{N(e,!1)}};return(0,v.jsxs)(n.A,{sx:{padding:2,background:b.A.thirdColor,boxShadow:"0px 0px 14px rgba(0, 0, 0, 0.14)",borderRadius:"12px"},children:[(0,v.jsxs)(n.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)(s.A,{variant:"h6",fontWeight:"bold",children:"New bookings"}),(0,v.jsx)(s.A,{variant:"body2",color:"gray",children:S.length>0?"Recent guest reservations list":"No bookings found"})]}),(0,v.jsx)(i.A,{sx:{width:"fit-content",color:b.A.firstColor},children:(0,v.jsx)(a.A,{variant:"contained",color:"Available"===k?"success":"error",onClick:()=>{if(!r||null==k)return;const e=k,t="Available"===k?"Unavailable":"Available";y(t),(0,m.hI)(r,{roomAvailable:t}).then((()=>{console.log("Availability updated to",t)})).catch((t=>{console.error("Error updating availability:",t),y(e)}))},disabled:!r||w,sx:{textTransform:"none"},children:null!==k&&void 0!==k?k:w?"Loading...":"Unavailable"})})]}),S.length>0?(0,v.jsx)(l.A,{component:d.A,sx:{marginTop:2,boxShadow:"none",maxHeight:420},children:(0,v.jsxs)(c.A,{"aria-label":"bookings table",sx:{background:b.A.thirdColor},stickyHeader:!0,children:[(0,v.jsx)(h.A,{children:(0,v.jsx)(u.A,{children:["Booking ID","Guest name","Phone Number","Checked In Date","Checked In Time","Checked Out Date","Checked Out Time","Status","Actions"].map((e=>(0,v.jsx)(x.A,{sx:{fontWeight:"bold",color:"gray",fontSize:"14px",whiteSpace:"nowrap"},children:e},e)))})}),(0,v.jsx)(p.A,{children:S.map((e=>{var t,r,o,i,l,d,c,h,p,m,f;const j=R.includes(e.id);return(0,v.jsxs)(u.A,{sx:{border:"none"},children:[(0,v.jsx)(x.A,{sx:{verticalAlign:"middle"},children:e.id}),(0,v.jsx)(x.A,{children:(0,v.jsxs)(n.A,{display:"flex",alignItems:"center",gap:1,children:[(0,v.jsx)(g.A,{src:e.avatar,alt:null!==(t=e.geustName)&&void 0!==t?t:"guest"}),(0,v.jsx)(s.A,{children:null!==(r=e.geustName)&&void 0!==r?r:"Guest"})]})}),(0,v.jsxs)(x.A,{children:["+",null!==(o=null===e||void 0===e||null===(i=e.geustDetails)||void 0===i?void 0:i.phoneNumber)&&void 0!==o?o:"-"]}),(0,v.jsx)(x.A,{children:null!==(l=e.checkInDate)&&void 0!==l?l:"-"}),(0,v.jsx)(x.A,{children:null!==(d=e.checkInTime)&&void 0!==d?d:"-"}),(0,v.jsx)(x.A,{children:null!==(c=e.checkOutDate)&&void 0!==c?c:"-"}),(0,v.jsx)(x.A,{children:null!==(h=e.checkOutTime)&&void 0!==h?h:"-"}),(0,v.jsx)(x.A,{children:(0,v.jsx)(A.A,{label:null!==(p=e.status)&&void 0!==p?p:"unknown",sx:{backgroundColor:null!==(m=e.statusColor)&&void 0!==m?m:O(null!==(f=e.status)&&void 0!==f?f:""),color:"#000",fontWeight:"bold",textTransform:"capitalize"}})}),(0,v.jsx)(x.A,{children:(0,v.jsxs)(n.A,{display:"flex",gap:1,alignItems:"center",children:[(0,v.jsx)(a.A,{size:"small",variant:"contained",sx:{background:b.A.firstColor,textTransform:"none",borderRadius:"20px","&:disabled":{opacity:.6}},disabled:!D(e)||j,onClick:()=>T(e.id,"checkedIn"),children:j&&D(e)?"Processing...":"Check-In"}),(0,v.jsx)(a.A,{size:"small",variant:"outlined",sx:{color:b.A.firstColor,borderColor:b.A.firstColor,textTransform:"none",borderRadius:"20px","&:disabled":{opacity:.5}},disabled:!M(e)||j,onClick:()=>T(e.id,"checkedOut"),children:j&&M(e)?"Processing...":"Check-Out"})]})})]},e.id)}))})]})}):(0,v.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",sx:{background:b.A.thirdColor},children:(0,v.jsx)(s.A,{variant:"body1",color:"textSecondary",children:"No bookings available for this hotel"})})]})}},64912:(e,t,r)=>{r.r(t),r.d(t,{default:()=>M});var o=r(51214),n=r(59662),s=r(70579);const i=(0,n.A)((0,s.jsx)("path",{d:"m14.43 10-1.47-4.84c-.29-.95-1.63-.95-1.91 0L9.57 10H5.12c-.97 0-1.37 1.25-.58 1.81l3.64 2.6-1.43 4.61c-.29.93.79 1.68 1.56 1.09l3.69-2.8 3.69 2.81c.77.59 1.85-.16 1.56-1.09l-1.43-4.61 3.64-2.6c.79-.57.39-1.81-.58-1.81h-4.45z"}),"StarRateRounded");var a=r(17953),l=r(94389),d=r(42796),c=r(7353),h=r(68903),u=r(12110),x=r(26494),p=r(94496),g=r(53193),A=r(57465),b=r(32143),m=r(17392),v=r(50108),f=r(11653),j=r(87734),k=r(52185),y=r(6026),w=r(86150),C=r(90168),S=r(33580),I=r(8881),R=r(65043),z=r(69995),D=r(59628);const M=()=>{const e=[{name:"Dec 27",revenue:1e5},{name:"Jan 28",revenue:25e4},{name:"Feb 28",revenue:215060}],[t,r]=(0,R.useState)([]),[n,M]=(0,R.useState)({}),[N,O]=(0,R.useState)("");(0,R.useEffect)((()=>{(async()=>{const e={data:{filter:"",userId:(0,D.F6)()},page:0,pageSize:50,order:[["createdAt","ASC"]]};try{var t,o;const n=await(0,z.Vy)(e);if(null!==n&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&null!==(o=t.data)&&void 0!==o&&o.rows){const e=n.data.data.rows.map((e=>({id:e.id,name:e.propertyName})));return r(e),e.length>0&&O(e[0].id),e.map((e=>e.id))}}catch(n){console.error("Error fetching hotels:",n)}return[]})().then((e=>(async e=>{if(0===e.length)return;const t={};await Promise.all(e.map((async e=>{try{var r,o;const n={data:{filter:"",hotelId:e},page:0,pageSize:50,order:[["checkInDate","ASC"]]},s=await(0,z.Gc)(n);t[e]=(null===s||void 0===s||null===(r=s.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.rows)||[]}catch(n){console.error(`Error fetching bookings for hotel ${e}:`,n),t[e]=[]}}))),M(t)})(null!==e&&void 0!==e?e:[])))}),[]);return(0,s.jsx)(c.A,{p:3,sx:{background:S.A.thirdColor},children:(0,s.jsxs)(h.Ay,{container:!0,spacing:3,children:[(0,s.jsx)(h.Ay,{item:!0,xs:12,children:(0,s.jsx)(u.A,{sx:{background:S.A.thirdColor,boxShadow:"0px 0px 14px rgba(0, 0, 0, 0.14)",borderRadius:"12px"},children:(0,s.jsxs)(x.A,{children:[(0,s.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,s.jsx)(p.A,{fontWeight:"bold",variant:"h6",children:"Upcoming Bookings"}),t.length>0&&(0,s.jsx)(g.A,{sx:{minWidth:200},children:(0,s.jsx)(A.A,{value:N,onChange:e=>{O(e.target.value)},size:"small",children:t.map((e=>(0,s.jsx)(b.A,{value:e.id,children:e.name},e.id)))})})]}),N&&(0,s.jsx)(I.A,{bookings:n[N]||[],hotelId:N,onCheckIn:async e=>{var t;if(!N)return;t=n[N];M((t=>{const r={...t};return r[N]=(r[N]||[]).map((t=>t.id===e?{...t,status:"checked in"}:t)),r}))},onCheckOut:async e=>{var t;if(!N)return;t=n[N];M((t=>{const r={...t};return r[N]=(r[N]||[]).map((t=>t.id===e?{...t,status:"checked out"}:t)),r}))}})]})})}),(0,s.jsx)(h.Ay,{item:!0,xs:12,md:12,children:(0,s.jsx)(h.Ay,{container:!0,spacing:2.5,children:[{title:"New Bookings",value:840,icon:(0,s.jsx)(o.A,{}),change:"8.70%",color:"#A3E4D7"},{title:"Guest ratings",value:"4.7/5",icon:(0,s.jsx)(i,{}),change:"-3.56%",color:"#D4EFDF"},{title:"Total Revenue",value:"\u20b9123,980",icon:(0,s.jsx)(a.A,{}),change:"5.70%",color:"#D5F5E3"}].map(((e,t)=>(0,s.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,s.jsx)(u.A,{sx:{background:S.A.thirdColor,boxShadow:"0px 0px 14px rgba(0, 0, 0, 0.14)",borderRadius:"12px"},children:(0,s.jsxs)(x.A,{children:[(0,s.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,s.jsx)(p.A,{color:"#7c7c7c",fontSize:"14px",children:e.title}),(0,s.jsx)(m.A,{style:{background:S.A.firstColor,color:"white",borderRadius:"8px"},children:e.icon})]}),(0,s.jsx)(p.A,{variant:"h5",fontWeight:600,children:e.value}),(0,s.jsxs)(p.A,{mt:2,display:"flex",alignItems:"center",gap:1,sx:{color:e.change.includes("-")?"red":"green",width:"fit-content",px:2,borderRadius:"4px",border:"solid 1px",fontSize:"14px"},children:[e.change.includes("-")?(0,s.jsx)(l.A,{}):(0,s.jsx)(d.A,{})," ",e.change," from last week"]})]})})},t)))})}),(0,s.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,s.jsx)(u.A,{sx:{background:S.A.firstColor,color:"white",borderRadius:"10px",padding:"20px",height:"250px"},children:(0,s.jsxs)(x.A,{sx:{p:0,pb:"0 !important"},children:[(0,s.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,s.jsx)(p.A,{fontWeight:"bold",variant:"h6",children:"Booking Overview"}),(0,s.jsx)(g.A,{sx:{width:"fit-content",color:"white","& .MuiOutlinedInput-root":{fontSize:"8px",padding:"0px",borderRadius:"8px",color:"white",border:"1px solid",borderColor:"white"},"& .MuiSelect-icon":{color:"white"}},children:(0,s.jsx)(A.A,{size:"small",value:"Last 6 Months",children:(0,s.jsx)(b.A,{value:"Last 6 Months",children:"Last 6 Months"})})})]}),(0,s.jsx)(c.A,{sx:{height:200,marginTop:2,ml:"-10px"},children:(0,s.jsx)(v.u,{width:"100%",height:"100%",children:(0,s.jsxs)(f.b,{data:e,margin:{top:10,right:10,left:0,bottom:0},children:[(0,s.jsx)(j.d,{strokeDasharray:"3 3",stroke:"white"}),(0,s.jsx)(k.W,{style:{fontSize:"10px"},dataKey:"name",stroke:"white"}),(0,s.jsx)(y.h,{style:{fontSize:"10px"},stroke:"white"}),(0,s.jsx)(w.m,{contentStyle:{backgroundColor:S.A.firstColor,border:"solid 1.5px white",borderRadius:"4px",color:"white"}}),(0,s.jsx)(C.N,{type:"monotone",dataKey:"revenue",stroke:"white",strokeWidth:3,dot:{r:6}})]})})})]})})}),(0,s.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,s.jsx)(u.A,{sx:{background:S.A.firstColor,color:"white",borderRadius:"10px",padding:"20px",height:"250px"},children:(0,s.jsxs)(x.A,{sx:{p:0,pb:"0 !important"},children:[(0,s.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,s.jsx)(p.A,{fontWeight:"bold",variant:"h6",children:"Revenue"}),(0,s.jsx)(g.A,{sx:{width:"fit-content",color:"white","& .MuiOutlinedInput-root":{fontSize:"8px",padding:"0px",borderRadius:"8px",color:"white",border:"1px solid",borderColor:"white"},"& .MuiSelect-icon":{color:"white"}},children:(0,s.jsx)(A.A,{size:"small",value:"Last 6 Months",children:(0,s.jsx)(b.A,{value:"Last 6 Months",children:"Last 6 Months"})})})]}),(0,s.jsx)(c.A,{sx:{height:200,marginTop:2,ml:"-10px"},children:(0,s.jsx)(v.u,{width:"100%",height:"100%",children:(0,s.jsxs)(f.b,{data:e,margin:{top:10,right:10,left:0,bottom:0},children:[(0,s.jsx)(j.d,{strokeDasharray:"3 3",stroke:"white"}),(0,s.jsx)(k.W,{style:{fontSize:"10px"},dataKey:"name",stroke:"white"}),(0,s.jsx)(y.h,{style:{fontSize:"10px"},stroke:"white"}),(0,s.jsx)(w.m,{contentStyle:{backgroundColor:S.A.firstColor,border:"solid 1.5px white",borderRadius:"4px",color:"white"}}),(0,s.jsx)(C.N,{type:"monotone",dataKey:"revenue",stroke:"white",strokeWidth:3,dot:{r:6}})]})})})]})})})]})})}},81045:(e,t,r)=>{r.d(t,{A:()=>v});var o=r(65043),n=r(58387),s=r(98610),i=r(34535),a=r(56262),l=r(98206),d=r(59662),c=r(70579);const h=(0,d.A)((0,c.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var u=r(92532),x=r(72372);function p(e){return(0,x.Ay)("MuiAvatar",e)}(0,u.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var g=r(4162);const A=(0,i.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})((0,a.A)((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(t.vars||t).palette.background.default,...t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:t.palette.grey[400],...t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})}}}]}}))),b=(0,i.Ay)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),m=(0,i.Ay)(h,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const v=o.forwardRef((function(e,t){const r=(0,l.b)({props:e,name:"MuiAvatar"}),{alt:i,children:a,className:d,component:h="div",slots:u={},slotProps:x={},imgProps:v,sizes:f,src:j,srcSet:k,variant:y="circular",...w}=r;let C=null;const S={...r,component:h,variant:y},I=function(e){let{crossOrigin:t,referrerPolicy:r,src:n,srcSet:s}=e;const[i,a]=o.useState(!1);return o.useEffect((()=>{if(!n&&!s)return;a(!1);let e=!0;const o=new Image;return o.onload=()=>{e&&a("loaded")},o.onerror=()=>{e&&a("error")},o.crossOrigin=t,o.referrerPolicy=r,o.src=n,s&&(o.srcset=s),()=>{e=!1}}),[t,r,n,s]),i}({...v,..."function"===typeof x.img?x.img(S):x.img,src:j,srcSet:k}),R=j||k,z=R&&"error"!==I;S.colorDefault=!z,delete S.ownerState;const D=(e=>{const{classes:t,variant:r,colorDefault:o}=e,n={root:["root",r,o&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,s.A)(n,p,t)})(S),[M,N]=(0,g.A)("img",{className:D.img,elementType:b,externalForwardedProps:{slots:u,slotProps:{img:{...v,...x.img}}},additionalProps:{alt:i,src:j,srcSet:k,sizes:f},ownerState:S});return C=z?(0,c.jsx)(M,{...N}):a||0===a?a:R&&i?i[0]:(0,c.jsx)(m,{ownerState:S,className:D.fallback}),(0,c.jsx)(A,{as:h,className:(0,n.A)(D.root,d),ref:t,...w,ownerState:S,children:C})}))}}]);
//# sourceMappingURL=912.d8d76834.chunk.js.map