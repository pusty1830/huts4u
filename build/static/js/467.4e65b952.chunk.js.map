{"version":3,"file":"static/js/467.4e65b952.chunk.js","mappings":"ibA8CA,MAoPA,EApPsDA,IAK/C,IALgD,aACnDC,EAAY,eAEZC,GAEHF,EACGG,QAAQC,IAAIF,IAGKG,EAAAA,EAAAA,MAAjB,MACOC,EAAMC,IAAWC,EAAAA,EAAAA,WAAS,GAmL3BC,EAAcA,IAAMF,GAAQ,GAElC,OACIG,EAAAA,EAAAA,KAAA,OAAAC,UACIC,EAAAA,EAAAA,MAACC,EAAAA,EAAM,CACHP,KAAMA,EACNQ,QAASL,EACTM,SAAS,KACTC,WAAS,EACTC,GAAI,CACA,mBAAoB,CAChBC,QAAS,MACTC,aAAc,SAEpBR,SAAA,EAEFD,EAAAA,EAAAA,KAACU,EAAAA,EAAW,CAAAT,SAAC,2BACbD,EAAAA,EAAAA,KAACW,EAAAA,EAAa,CAAAV,UACVD,EAAAA,EAAAA,KAAA,KAAAC,SAAG,kEAEPC,EAAAA,EAAAA,MAACU,EAAAA,EAAa,CAACC,MAAO,CAAEC,QAAS,OAAQC,eAAgB,YAAad,SAAA,EAClED,EAAAA,EAAAA,KAACgB,EAAAA,EAAM,CACHH,MAAO,CACHI,cAAe,OACfC,MAAO,SAEXC,QAASpB,EAAYE,SACxB,YAGDD,EAAAA,EAAAA,KAACgB,EAAAA,EAAM,CACHG,QAvMIC,UAAa,IAADC,EAAAC,EAAAC,EAThBC,MAWhB,UAXgBA,EAUwB,+CATxC,IAAIC,SAASC,IACT,MAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOH,IAAMA,EACbG,EAAOG,OAAS,IAAMJ,GAAQ,GAC9BC,EAAOI,QAAU,IAAML,GAAQ,GAC/BE,SAASI,KAAKC,YAAYN,EAAO,OAKZO,OAAeC,SAEpC,YADAC,MAAM,gCAiBV,MAAMC,EAAU,CACZC,IAAKC,EAAAA,IAAY,GACjBC,OAAQjD,EAAakD,KAAKD,OAC1BE,SAAUnD,EAAakD,KAAKC,SAC5BC,SAAUpD,EAAakD,KAAKG,GAC5BC,QAAS,CACLC,KAAoB,OAAdtD,QAAc,IAAdA,GAAyB,QAAX6B,EAAd7B,EAAgBuD,iBAAS,IAAA1B,OAAX,EAAdA,EAA2ByB,KACjCE,MAAqB,OAAdxD,QAAc,IAAdA,GAAyB,QAAX8B,EAAd9B,EAAgBuD,iBAAS,IAAAzB,OAAX,EAAdA,EAA2B0B,MAClCC,QAAuB,OAAdzD,QAAc,IAAdA,GAAyB,QAAX+B,EAAd/B,EAAgBuD,iBAAS,IAAAxB,OAAX,EAAdA,EAA2B2B,aAExCC,QAAS/B,UACL,IAAK,IAADgC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACA,MAAMC,QAAYC,EAAAA,EAAAA,IAAc,CAC5BC,QAASC,EAASC,kBAClBC,UAAWF,EAASG,oBACpBC,UAAWJ,EAASK,qBAExBhG,QAAQC,IAAIuF,GACZ7C,MAAM,sBACN,MAAMsD,EAAU,CACZC,QAAQC,EAAAA,EAAAA,MACRC,QAAuB,OAAdrG,QAAc,IAAdA,GAAqB,QAAP4D,EAAd5D,EAAgBsG,aAAK,IAAA1C,OAAP,EAAdA,EAAuBR,GAChCmD,UAAyB,OAAdvG,QAAc,IAAdA,GAAyB,QAAX6D,EAAd7D,EAAgBuD,iBAAS,IAAAM,OAAX,EAAdA,EAA2BP,KACtCkD,WAAYzG,EAAakD,KAAKD,OAC9ByD,YAA2B,OAAdzG,QAAc,IAAdA,GAAsB,QAAR8D,EAAd9D,EAAgB0G,cAAM,IAAA5C,OAAR,EAAdA,EAAwB2C,YACrCE,YAA2B,OAAd3G,QAAc,IAAdA,GAAsB,QAAR+D,EAAd/D,EAAgB0G,cAAM,IAAA3C,OAAR,EAAdA,EAAwB4C,YACrCC,aAA4B,OAAd5G,QAAc,IAAdA,GAAsB,QAARgE,EAAdhE,EAAgB0G,cAAM,IAAA1C,OAAR,EAAdA,EAAwB4C,aACtCC,aAA4B,OAAd7G,QAAc,IAAdA,GAAsB,QAARiE,EAAdjE,EAAgB0G,cAAM,IAAAzC,OAAR,EAAdA,EAAwB4C,aACtCC,YAA2B,OAAd9G,QAAc,IAAdA,OAAc,EAAdA,EAAgB8G,YAC7BC,aAA4B,OAAd/G,QAAc,IAAdA,OAAc,EAAdA,EAAgBuD,UAC9ByD,OAAsB,OAAdhH,QAAc,IAAdA,OAAc,EAAdA,EAAgBgH,OACxBvG,SAAwB,OAAdT,QAAc,IAAdA,OAAc,EAAdA,EAAgBS,SAC1BwG,UAAyB,OAAdjH,QAAc,IAAdA,GAAqB,QAAPkE,EAAdlE,EAAgBsG,aAAK,IAAApC,OAAP,EAAdA,EAAuBgD,aAClCC,OAAQ,UACRrB,UAAc,OAAHL,QAAG,IAAHA,GAAS,QAANtB,EAAHsB,EAAKxC,YAAI,IAAAkB,GAAM,QAANC,EAATD,EAAWlB,YAAI,IAAAmB,OAAZ,EAAHA,EAAiBhB,IAEhCnD,QAAQC,IAAIgG,IAGZkB,EAAAA,EAAAA,IAAYlB,GAASmB,MAAM5B,IAAS,IAAD6B,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC/B,MAAMC,EAAgB,CAClB9C,QAAQC,EAAAA,EAAAA,MACRN,UAAc,OAAHL,QAAG,IAAHA,GAAS,QAAN6B,EAAH7B,EAAKxC,YAAI,IAAAqE,GAAM,QAANC,EAATD,EAAWrE,YAAI,IAAAsE,OAAZ,EAAHA,EAAiBnE,GAC5BiD,QAAuB,OAAdrG,QAAc,IAAdA,GAAqB,QAAPwH,EAAdxH,EAAgBsG,aAAK,IAAAkB,OAAP,EAAdA,EAAuBpE,GAChC8F,UAAc,OAAHzD,QAAG,IAAHA,GAAS,QAANgC,EAAHhC,EAAKxC,YAAI,IAAAwE,GAAM,QAANC,EAATD,EAAWxE,YAAI,IAAAyE,OAAZ,EAAHA,EAAiBtE,GAC5B+F,YAA0D,KAA/B,OAAdnJ,QAAc,IAAdA,GAA8B,QAAhB2H,EAAd3H,EAAgBoJ,sBAAc,IAAAzB,OAAhB,EAAdA,EAAgC0B,YAC7CC,SAA0G,MAAjF,OAAdtJ,QAAc,IAAdA,GAA8B,QAAhB4H,EAAd5H,EAAgBoJ,sBAAc,IAAAxB,OAAhB,EAAdA,EAAgC2B,cAA4B,OAAdvJ,QAAc,IAAdA,GAA8B,QAAhB6H,EAAd7H,EAAgBoJ,sBAAc,IAAAvB,OAAhB,EAAdA,EAAgC2B,gBACzFC,eAA0G,MAA3E,OAAdzJ,QAAc,IAAdA,GAA8B,QAAhB8H,EAAd9H,EAAgBoJ,sBAAc,IAAAtB,OAAhB,EAAdA,EAAgC4B,YAA0B,OAAd1J,QAAc,IAAdA,GAA8B,QAAhB+H,EAAd/H,EAAgBoJ,sBAAc,IAAArB,OAAhB,EAAdA,EAAgC4B,YAC7FzG,SAAU,MACV0G,iBAAkB,CACX,OAAHnE,QAAG,IAAHA,GAAS,QAANuC,EAAHvC,EAAKxC,YAAI,IAAA+E,GAAM,QAANC,EAATD,EAAW/E,YAAI,IAAAgF,OAAZ,EAAHA,EAAiB7E,IAErByG,YAAaC,IAAoB,OAAd9J,QAAc,IAAdA,GAAsB,QAARkI,EAAdlI,EAAgB0G,cAAM,IAAAwB,OAAR,EAAdA,EAAwBzB,YAAa,eAAesD,SACvE5C,OAAQ,UACR6C,eAAgB,KAChBC,gBAAiB,KACjBC,cAAe,KACfC,YAAa,KACbC,KAAM,iBAIJC,EAAmB,CACrBlE,QAAQC,EAAAA,EAAAA,MACRN,UAAc,OAAHL,QAAG,IAAHA,GAAS,QAAN0C,EAAH1C,EAAKxC,YAAI,IAAAkF,GAAM,QAANC,EAATD,EAAWlF,YAAI,IAAAmF,OAAZ,EAAHA,EAAiBhF,GAC5BiD,QAAuB,OAAdrG,QAAc,IAAdA,GAAqB,QAAPqI,EAAdrI,EAAgBsG,aAAK,IAAA+B,OAAP,EAAdA,EAAuBjF,GAChC8F,UAAc,OAAHzD,QAAG,IAAHA,GAAS,QAAN6C,EAAH7C,EAAKxC,YAAI,IAAAqF,GAAM,QAANC,EAATD,EAAWrF,YAAI,IAAAsF,OAAZ,EAAHA,EAAiBnF,GAG5B+F,YAA0D,KAA/B,OAAdnJ,QAAc,IAAdA,GAA8B,QAAhBwI,EAAdxI,EAAgBoJ,sBAAc,IAAAZ,OAAhB,EAAdA,EAAgCa,YAC7CC,SAA0G,MAAjF,OAAdtJ,QAAc,IAAdA,GAA8B,QAAhByI,EAAdzI,EAAgBoJ,sBAAc,IAAAX,OAAhB,EAAdA,EAAgCc,cAA4B,OAAdvJ,QAAc,IAAdA,GAA8B,QAAhB0I,EAAd1I,EAAgBoJ,sBAAc,IAAAV,OAAhB,EAAdA,EAAgCc,gBACzFc,iBAAkH,MAAjF,OAAdtK,QAAc,IAAdA,GAA8B,QAAhB2I,EAAd3I,EAAgBoJ,sBAAc,IAAAT,OAAhB,EAAdA,EAAgCY,cAA4B,OAAdvJ,QAAc,IAAdA,GAA8B,QAAhB4I,EAAd5I,EAAgBoJ,sBAAc,IAAAR,OAAhB,EAAdA,EAAgCY,gBAEjGtG,SAAU,MAEV0G,iBAAkB,CAAI,OAAHnE,QAAG,IAAHA,GAAS,QAANoD,EAAHpD,EAAKxC,YAAI,IAAA4F,GAAM,QAANC,EAATD,EAAW5F,YAAI,IAAA6F,OAAZ,EAAHA,EAAiB1F,IACpCyG,YAAaC,IAAoB,OAAd9J,QAAc,IAAdA,GAAsB,QAAR+I,EAAd/I,EAAgB0G,cAAM,IAAAqC,OAAR,EAAdA,EAAwBtC,YAAa,eAAesD,SACvEQ,YAAa,IAAIC,KACjBC,YAAa,KAEbtD,OAAQ,UAER6C,eAAgB,KAChBC,gBAAiB,KACjBC,cAAe,KAEfC,YAAa,KACbC,KAAM,2BAEVM,EAAAA,EAAAA,IAAgBL,GAAkBhD,MAAM5B,IACpCxF,QAAQC,IAAI,0BAA0B,IACvCyK,OAAOC,IACN3K,QAAQC,IAAI,qCAAsC0K,EAAI,KAE1DC,EAAAA,EAAAA,IAAmB5B,GAAe5B,MAAM5B,IACpCxF,QAAQC,IAAI,yBAAyB,IACtCyK,OAAOC,IACN3K,QAAQC,IAAI,mCAAoC0K,EAAI,KAGxDE,EAAAA,EAAAA,IAAS,OAAHrF,QAAG,IAAHA,GAAS,QAANuD,EAAHvD,EAAKxC,YAAI,IAAA+F,OAAN,EAAHA,EAAW+B,IAAI,IACtBJ,OAAOC,IACN3K,QAAQC,IAAI0K,EAAI,IAGpB,MAAMI,EAAiB,CACnBC,UAAyB,OAAdjL,QAAc,IAAdA,GAAyB,QAAXqE,EAAdrE,EAAgBuD,iBAAS,IAAAc,OAAX,EAAdA,EAA2Bf,KACtC4H,SAAwB,OAAdlL,QAAc,IAAdA,GAAqB,QAAPsE,EAAdtE,EAAgBsG,aAAK,IAAAhC,OAAP,EAAdA,EAAuB6G,QACjClE,UAAyB,OAAdjH,QAAc,IAAdA,GAAqB,QAAPuE,EAAdvE,EAAgBsG,aAAK,IAAA/B,OAAP,EAAdA,EAAuB2C,aAClCT,YAAaqD,IAAoB,OAAd9J,QAAc,IAAdA,GAAsB,QAARwE,EAAdxE,EAAgB0G,cAAM,IAAAlC,OAAR,EAAdA,EAAwBiC,YAAa,eAAe2E,OAAO,eAC9EzE,YAA2B,OAAd3G,QAAc,IAAdA,GAAsB,QAARyE,EAAdzE,EAAgB0G,cAAM,IAAAjC,OAAR,EAAdA,EAAwBkC,YACrC0E,MAAqB,OAAdrL,QAAc,IAAdA,GAAyB,QAAX0E,EAAd1E,EAAgBuD,iBAAS,IAAAmB,OAAX,EAAdA,EAA2BhB,YAClC8C,YAA2B,OAAdxG,QAAc,IAAdA,GAA8B,QAAhB2E,EAAd3E,EAAgBoJ,sBAAc,IAAAzE,OAAhB,EAAdA,EAAgC+E,YAA0B,OAAd1J,QAAc,IAAdA,GAA8B,QAAhB4E,EAAd5E,EAAgBoJ,sBAAc,IAAAxE,OAAhB,EAAdA,EAAgC+E,WACzFD,UAAyB,OAAd1J,QAAc,IAAdA,GAA8B,QAAhB6E,EAAd7E,EAAgBoJ,sBAAc,IAAAvE,OAAhB,EAAdA,EAAgC6E,UAC3CC,UAAyB,OAAd3J,QAAc,IAAdA,GAA8B,QAAhB8E,EAAd9E,EAAgBoJ,sBAAc,IAAAtE,OAAhB,EAAdA,EAAgC6E,UAC3C2B,aAA4B,OAAdtL,QAAc,IAAdA,GAA8B,QAAhB+E,EAAd/E,EAAgBoJ,sBAAc,IAAArE,OAAhB,EAAdA,EAAgCwG,YAA0B,OAAdvL,QAAc,IAAdA,GAA8B,QAAhBgF,EAAdhF,EAAgBoJ,sBAAc,IAAApE,OAAhB,EAAdA,EAAgC2E,YAA0B,OAAd3J,QAAc,IAAdA,GAA8B,QAAhBiF,EAAdjF,EAAgBoJ,sBAAc,IAAAnE,OAAhB,EAAdA,EAAgCuE,gBACtID,YAA2B,OAAdvJ,QAAc,IAAdA,GAA8B,QAAhBkF,EAAdlF,EAAgBoJ,sBAAc,IAAAlE,OAAhB,EAAdA,EAAgCqE,YAC7CC,cAA6B,OAAdxJ,QAAc,IAAdA,GAA8B,QAAhBmF,EAAdnF,EAAgBoJ,sBAAc,IAAAjE,OAAhB,EAAdA,EAAgCqE,cAC/CH,WAA0B,OAAdrJ,QAAc,IAAdA,GAA8B,QAAhBoF,EAAdpF,EAAgBoJ,sBAAc,IAAAhE,OAAhB,EAAdA,EAAgCiE,WAC5CrC,OAAsB,OAAdhH,QAAc,IAAdA,OAAc,EAAdA,EAAgBgH,OACxBvG,SAAwB,OAAdT,QAAc,IAAdA,OAAc,EAAdA,EAAgBS,SAC1B+K,MAAO,EACP3E,aAA4B,OAAd7G,QAAc,IAAdA,GAAsB,QAARqF,EAAdrF,EAAgB0G,cAAM,IAAArB,OAAR,EAAdA,EAAwBwB,aACtCD,aAAckD,IAAoB,OAAd9J,QAAc,IAAdA,GAAsB,QAARsF,EAAdtF,EAAgB0G,cAAM,IAAApB,OAAR,EAAdA,EAAwBsB,aAAc,eAAewE,OAAO,eAChFK,WAA0B,OAAdzL,QAAc,IAAdA,GAAqB,QAAPuF,EAAdvF,EAAgBsG,aAAK,IAAAf,OAAP,EAAdA,EAAuBmG,eACnCC,kBAAiC,OAAd3L,QAAc,IAAdA,GAAqB,QAAPwF,EAAdxF,EAAgBsG,aAAK,IAAAd,OAAP,EAAdA,EAAuBoG,iBAG9C3L,QAAQC,IAAI8K,IACZa,EAAAA,EAAAA,IAAeb,GAAgB3D,MAAM5B,IACjCxF,QAAQC,IAAI,yBAA0BuF,EAAI,IAC3CkF,OAAOC,IACN3K,QAAQC,IAAI0K,EAAI,IAEpBlI,OAAOwI,SAASY,KAAO,cAG3B,CAAE,MAAOC,GACLnJ,MAAM,iDACV,IAIS,IAAKF,OAAeC,SAASE,GACrCzC,MAAM,EAoCC4L,QAAQ,YACR3K,MAAO,CACH4K,WAAYvK,EAAAA,EAAMwK,WAClBC,SAAU,OACV1K,cAAe,OACf2K,OAAQ,mBAEZrL,GAAI,CACAC,QAAS,WACTqL,WAAY,gBACZ,UAAW,CACPC,aAAc,SAEpB7L,SACL,0BAKP,E,oECpQd,MAoSM8L,EAAa,CACjBC,SAAU,WACVC,IAAK,MACLC,KAAM,MACNC,UAAW,wBACX9L,SAAU,IACV+L,MAAO,MACPC,OAAQ,IACRZ,WAAYvK,EAAAA,EAAMoL,WAClB7L,aAAc,QAIhB,EAjTsBnB,IAQK,IARJ,KACrBM,EAAI,QACJQ,EAAO,sBACPmM,EAAqB,MACrB1B,EAAK,KACL/H,EAAI,MACJE,EAAK,MACLwJ,GACmBlN,EACnB,MAAOmN,IAAQ3M,EAAAA,EAAAA,UAAS,IACjB4M,EAAKC,IAAU7M,EAAAA,EAAAA,UAAmB8M,MAAM,GAAGC,KAAK,KAIjDC,GAAUC,EAAAA,EAAAA,QAAuC,IACjDC,GAAWrN,EAAAA,EAAAA,MACX+K,GAAWuC,EAAAA,EAAAA,MAGXlN,EAAcA,KAClB,MAAMmN,EAAe,IAAIC,gBAAgBzC,EAAS0C,QAElDF,EAAaG,OAAO,SACpBH,EAAaG,OAAO,SACpBH,EAAaG,OAAO,QACpBH,EAAaG,OAAO,SACpBH,EAAaG,OAAO,SAEpBL,EAAS,GAAGtC,EAAS4C,YAAYJ,EAAaK,aAAc,CAC1DC,SAAS,EACTC,MAAO,IAAK/C,EAAS+C,SAIvB,IACErN,GACF,CAAE,MAAOsN,GACG,IAKdC,EAAAA,EAAAA,YAAU,KACJ/N,GACFgO,YAAW,KAAO,IAADC,EAAAC,EACG,QAAlBD,EAAAf,EAAQiB,QAAQ,UAAE,IAAAF,GAAlBA,EAAoBG,QACF,QAAlBF,EAAAhB,EAAQiB,QAAQ,UAAE,IAAAD,GAAlBA,EAAoBG,QAAQ,GAC3B,GACL,GACC,CAACrO,IAuHJ,OACEI,EAAAA,EAAAA,KAACkO,EAAAA,EAAK,CAACtO,KAAMA,EAAMQ,QAASL,EAAYE,UACtCD,EAAAA,EAAAA,KAACmO,EAAAA,EAAG,CAAC5N,GAAIwL,EAAW9L,UAClBC,EAAAA,EAAAA,MAAA,OACEkO,UAAU,YACVvN,MAAO,CACL4K,WAAYvK,EAAAA,EAAMuK,WAClBvK,MAAO,QACP8K,SAAU,WACVqC,UAAW,iDACX5N,aAAc,OACd6N,SAAU,UACVrO,SAAA,EAEFD,EAAAA,EAAAA,KAACmO,EAAAA,EAAG,CACF5N,GAAI,CACFkL,WAAY,6BACZ8C,eAAgB,CAAEC,GAAI,MAAOC,GAAI,OACjCC,iBAAkB,YAClBC,mBAAoB,cACpB3C,SAAU,WACVC,IAAK,EACLC,KAAM,EACNE,MAAO,OACPC,OAAQ,WAGZrM,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CAACpD,QAAQ,KAAIvL,SAAC,eACzBC,EAAAA,EAAAA,MAAC0O,EAAAA,EAAU,CAACpD,QAAQ,QAAQjL,GAAI,CAAEsO,GAAI,GAAI5O,SAAA,CAAC,aAC9B4K,EAAO,KAClB3K,EAAAA,EAAAA,MAACc,EAAAA,EAAM,CACL8N,KAAK,QACL3N,QAASA,IAAMpB,IACfQ,GAAI,CACFW,MAAOA,EAAAA,EAAMwK,WACbD,WAAYvK,EAAAA,EAAMoL,WAClByC,EAAG,EACHC,GAAI,EACJC,SAAU,EACVC,GAAI,EACJjO,cAAe,QACfhB,SAAA,EAEFD,EAAAA,EAAAA,KAACmP,EAAAA,EAAI,CAAC5O,GAAI,CAAEoL,SAAU,UAAiB,eAI3C3L,EAAAA,EAAAA,KAACoP,EAAAA,GAAI,CAACC,WAAS,EAACC,QAAS,EAAGvO,eAAe,SAASwO,GAAI,EAAEtP,SACvDyM,EAAI8C,KAAI,CAACC,EAAGC,KACX1P,EAAAA,EAAAA,KAACoP,EAAAA,GAAI,CAACO,MAAI,EAAA1P,UACRD,EAAAA,EAAAA,KAAC4P,EAAAA,EAAS,CACRC,SAAWC,GAAiChD,EAAQiB,QAAQ2B,GAASI,EACrEC,MAAOrD,EAAIgD,GACXM,SAAWtC,GAzKHuC,EAACP,EAAeK,KAEtC,MAAMG,EAASH,EAAMvC,QAAQ,MAAO,IACpC,GAAsB,IAAlB0C,EAAOC,OAAc,CACvB,MAAMC,EAAS,IAAI1D,GAGnB,OAFA0D,EAAOV,GAAS,QAChB/C,EAAOyD,EAET,CAGA,GAAIF,EAAOC,OAAS,EAAG,CACrB,MAAMC,EAAS,IAAI1D,GACnB,IAAIqC,EAAIW,EACR,IAAK,MAAMW,KAAMH,EAAQ,CACvB,GAAInB,GAxDQ,EAwDQ,MACpBqB,EAAOrB,GAAKsB,EACZtB,GACF,CACApC,EAAOyD,GAEP,MAAME,EAAYC,KAAKC,IAAId,EAAQQ,EAAOC,OAAQM,GAKlD,YAJA7C,YAAW,KAAO,IAAD8C,EAAAC,EACW,QAA1BD,EAAA5D,EAAQiB,QAAQuC,UAAU,IAAAI,GAA1BA,EAA4B1C,QACF,QAA1B2C,EAAA7D,EAAQiB,QAAQuC,UAAU,IAAAK,GAA1BA,EAA4B1C,QAAQ,GACnC,GAEL,CAGA,MAAMmC,EAAS,IAAI1D,GACnB0D,EAAOV,GAASQ,EAChBvD,EAAOyD,GAGHV,EAAQe,GACV7C,YAAW,KAAO,IAADgD,EAAAC,EACW,QAA1BD,EAAA9D,EAAQiB,QAAQ2B,EAAQ,UAAE,IAAAkB,GAA1BA,EAA4B5C,QACF,QAA1B6C,EAAA/D,EAAQiB,QAAQ2B,EAAQ,UAAE,IAAAmB,GAA1BA,EAA4B5C,QAAQ,GACnC,GACL,EAiI+BgC,CAAgBP,EAAOhC,EAAEoD,OAAOf,OACjDgB,UAAYrD,GA7HNsD,EACpBtB,EACAhC,KAEA,MAAMpL,EAAMoL,EAAEpL,IAEd,GAAY,cAARA,GACF,GAAIoK,EAAIgD,GAAQ,CAEd,MAAMU,EAAS,IAAI1D,GACnB0D,EAAOV,GAAS,GAChB/C,EAAOyD,EACT,MAAO,GAAIV,EAAQ,EAAG,CAAC,IAADuB,EAEM,QAA1BA,EAAAnE,EAAQiB,QAAQ2B,EAAQ,UAAE,IAAAuB,GAA1BA,EAA4BjD,QAC5B,MAAMoC,EAAS,IAAI1D,GACnB0D,EAAOV,EAAQ,GAAK,GACpB/C,EAAOyD,EACT,OACK,GAAY,cAAR9N,GAAuBoN,EAAQ,EAAG,CAAC,IAADwB,EACjB,QAA1BA,EAAApE,EAAQiB,QAAQ2B,EAAQ,UAAE,IAAAwB,GAA1BA,EAA4BlD,OAC9B,MAAO,GAAY,eAAR1L,GAAwBoN,EAAQe,EAAe,CAAC,IAADU,EAC9B,QAA1BA,EAAArE,EAAQiB,QAAQ2B,EAAQ,UAAE,IAAAyB,GAA1BA,EAA4BnD,OAC9B,GAsGgCgD,CAActB,EAAOhC,GACvC0D,QAAU1D,GAlGN2D,EAAC3D,EAA2CgC,KAC9DhC,EAAE4D,iBACF,MAAMC,EAAS7D,EAAE8D,cAAcC,QAAQ,cAAcjE,QAAQ,MAAO,IACpE,IAAK+D,EAAQ,OACb,MAAMnB,EAAS,IAAI1D,GACnB,IAAIqC,EAAIW,EACR,IAAK,MAAMW,KAAMkB,EAAQ,CACvB,GAAIxC,GAzHU,EAyHM,MACpBqB,EAAOrB,GAAKsB,EACZtB,GACF,CACApC,EAAOyD,GACP,MAAME,EAAYC,KAAKC,IAAId,EAAQ6B,EAAOpB,OAAQM,GAClD7C,YAAW,KAAO,IAAD8D,EAAAC,EACW,QAA1BD,EAAA5E,EAAQiB,QAAQuC,UAAU,IAAAoB,GAA1BA,EAA4B1D,QACF,QAA1B2D,EAAA7E,EAAQiB,QAAQuC,UAAU,IAAAqB,GAA1BA,EAA4B1D,QAAQ,GACnC,GAAG,EAkFwBoD,CAAY3D,EAA6CgC,GACzEkC,WAAY,CACVC,UAAW,EACXC,UAAW,UACXC,QAAS,SACTC,KAAM,MACNnR,MAAO,CACLoR,UAAW,SACXtG,SAAU,GACVuG,YAAa,gBAGjB3R,GAAI,CACF6L,MAAO,GACP+F,QAASjR,EAAAA,EAAMoL,WACf7L,aAAc,EACdmL,OAAQ,OACRwG,QAAS,OACT/D,UAAW,OACX,aAAc,CACZzC,OAAQ,QAEV,UAAW,CACTuG,QAAS,WAEX,wBAAyB,CACvBjR,MAAOA,EAAAA,EAAMwK,WACb2G,WAAY,cACZ1G,SAAU,OACVnL,QAAS,aAGb8R,QAAU5E,IACPA,EAAEoD,OAA4B7C,QAAQ,KAvC7ByB,QA8CpB1P,EAAAA,EAAAA,KAACgB,EAAAA,EAAM,CACLG,QAxHcoR,KArIN,IAsIZ7F,EAAI8F,KAAK,IAAIrC,QACfsC,EAAAA,EAAAA,IAAU,CACR/F,IAAKA,EAAI8F,KAAK,IACdE,UAAWlG,EACX3B,QACA/H,OACAE,UAEC6D,MAAM5B,IAAS,IAADtB,EAAAC,EAAAkD,EAAAC,GACb4L,EAAAA,EAAAA,IAAyB,OAAH1N,QAAG,IAAHA,GAAS,QAANtB,EAAHsB,EAAKxC,YAAI,IAAAkB,GAAM,QAANC,EAATD,EAAWlB,YAAI,IAAAmB,OAAZ,EAAHA,EAAiB4I,QACvCoG,EAAAA,EAAAA,IAAkB,OAAH3N,QAAG,IAAHA,GAAS,QAAN6B,EAAH7B,EAAKxC,YAAI,IAAAqE,GAAM,QAANC,EAATD,EAAWrE,YAAI,IAAAsE,OAAZ,EAAHA,EAAiB8L,MAChCvI,EAAAA,GAAMwI,QAAQ,0BACdvG,IACAnM,GAAS,IAEV+J,OAAOC,IACNE,EAAAA,GAAMiB,MAAM,sBAAsB,IAGtCjB,EAAAA,GAAMiB,MAAM,gCACd,EAoGQyG,KAAK,SACLzR,GAAI,CACFkL,WAAYvK,EAAAA,EAAMoL,WAClBpL,MAAOA,EAAAA,EAAMwK,WACbC,SAAU,OACVoH,WAAY,OACZ9R,cAAe,OACf+R,EAAG,OACHzD,GAAI,EACJnD,MAAO,OACPtL,QAAS,QACTkL,SAAU,WACViH,OAAQ,EACR/G,KAAM,EACNzL,aAAc,EACdyS,GAAI,EACJ7E,UAAW,qCACXpO,SACH,qBAKC,ECxQNkT,EAAmBC,EAAAA,GAAW,CAClCtQ,KAAMsQ,EAAAA,KAAaC,SAAS,oBAC5BrQ,MAAOoQ,EAAAA,KAAapQ,MAAM,iBAAiBsQ,aA2pB7C,EA1mBuBC,KAAO,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC3B,MAAMnJ,GAAWuC,EAAAA,EAAAA,MACXnH,EAAsB,QAAjB0N,EAAG9I,EAAS+C,aAAK,IAAA+F,OAAA,EAAdA,EAAgBM,UACxBC,EAAqB,QAAjBN,EAAG/I,EAAS+C,aAAK,IAAAgG,OAAA,EAAdA,EAAgBO,aACvBC,EAA6B,QAAjBP,EAAGhJ,EAAS+C,aAAK,IAAAiG,OAAA,EAAdA,EAAgBO,aAC/BrL,EAA+B,QAAjB+K,EAAGjJ,EAAS+C,aAAK,IAAAkG,OAAA,EAAdA,EAAgB/K,eACjCsL,EAAc,IAAI/G,gBAAgBzC,EAAS0C,QAE3C9G,EAAc4N,EAAYC,IAAI,eAC9BC,EAAcF,EAAYC,IAAI,QAC9BE,EAAcH,EAAYC,IAAI,eAC9B/N,EAAe8N,EAAYC,IAAI,gBAC/BnJ,EAAQkJ,EAAYC,IAAI,SACxB3N,EAAS0N,EAAYC,IAAI,UACzBlU,EAAWiU,EAAYC,IAAI,YAE3BpE,EAAoB,OAAZkE,QAAY,IAAZA,OAAY,EAAZA,EAAcK,KACtBC,EAAc,OAALxE,QAAK,IAALA,GAAmB,QAAd6D,EAAL7D,EAAOyE,MAAM,cAAM,IAAAZ,OAAd,EAALA,EAAsB,GAC/Ba,EAAkBF,EAASG,SAASH,EAAQ,IAAM,MAEjD1B,EAAM8B,IAAW7U,EAAAA,EAAAA,UAAc,CAAC,IAChC8U,EAAcC,KAAmB/U,EAAAA,EAAAA,WAAS,IAC1CgV,GAASC,KAAcjV,EAAAA,EAAAA,UAAS,CACrC+K,MAAO,GACP/H,KAAM,GACNE,MAAO,GACPwJ,MAAO,MAEFjN,GAAcyV,KAAmBlV,EAAAA,EAAAA,UAAc,OAG/CmV,GAAcC,KAAmBpV,EAAAA,EAAAA,WAAS,IAC1CqV,GAAWC,KAAgBtV,EAAAA,EAAAA,WAAS,IAE3C6N,EAAAA,EAAAA,YAAU,MACJ0H,EAAAA,EAAAA,QACFC,EAAAA,EAAAA,MACGzO,MAAM5B,IAAS,IAADtB,EACbgR,EAAW,OAAH1P,QAAG,IAAHA,GAAS,QAANtB,EAAHsB,EAAKxC,YAAI,IAAAkB,OAAN,EAAHA,EAAWlB,KAAK,IAEzB0H,OAAOC,IACN3K,QAAQC,IAAI0K,EAAI,GAEtB,GACC,IAGH,MAAMmL,GAAoBC,OAAqB,OAAd5M,QAAc,IAAdA,OAAc,EAAdA,EAAgBM,YAAc,EACzDuM,GAAoBD,OAAqB,OAAd5M,QAAc,IAAdA,OAAc,EAAdA,EAAgBG,cAAgB,EAC3D2M,GAAqBF,OAAqB,OAAd5M,QAAc,IAAdA,OAAc,EAAdA,EAAgBO,YAAc,EAC1DwM,GAAyBH,OAAqB,OAAd5M,QAAc,IAAdA,OAAc,EAAdA,EAAgBI,gBAAkB,EAClE4M,GAAoBJ,OAAqB,OAAd5M,QAAc,IAAdA,OAAc,EAAdA,EAAgBmC,WAAa,EACxD8K,GAAiBL,OAAqB,OAAd5M,QAAc,IAAdA,OAAc,EAAdA,EAAgBC,aAAe,EAGvDiN,GACJP,GAAoB,EAChB,CACArM,UAAWqM,GACXxM,YAAa0M,GACbtM,UAAWuM,GACX1M,cAAe2M,GACf5K,SAAU6K,GACVG,WAAYF,IA5Ga3M,KAC/B,MAAM8M,EAAcR,OAAOtM,IAAc,EAEzC,IAAK8M,GAAeA,GAAe,EACjC,MAAO,CACL9M,UAAW,EACXH,YAAa,EACbI,UAAW,EACXH,cAAe,EACf+B,SAAU,EACVkL,WAAY,EACZF,WAAY,GAKhB,MAAM5M,EAA0B,IAAd6M,EAEZjN,EAA0C,KAA3BiN,EAAc7M,GAE7BH,EAA8B,IAAdD,EAKhBkN,EAAmC,KAFbD,EAAc7M,EAAYJ,EAAcC,GAK9D+B,EAAW5B,EAAYH,EAAgBiN,EAK7C,MAAO,CACL/M,UAAW8M,EACXjN,cACAI,YACAH,gBACA+B,WACAkL,aACAF,WATiBC,EAAcjN,EAAcgC,EAU9C,EAqEKmL,CAAwBV,QAAW,OAAJzB,QAAI,IAAJA,OAAI,EAAJA,EAAMoC,iBAAqB,OAAJpC,QAAI,IAAJA,OAAI,EAAJA,EAAMqC,eAAgB,IAE5EC,GAAWP,GAAiB5M,UAC5BH,GAAc+M,GAAiB/M,YAC/BI,GAAY2M,GAAiB3M,UAC7BH,GAAgB8M,GAAiB9M,cACjC+B,GAAW+K,GAAiB/K,SAO5BuL,GAAcD,GACdE,GAAqBD,GAAc,IACnCE,GAA8BH,GAAWtN,GACzC0N,GAAiBtN,GACjBuN,GAAqB1N,GACrB2N,GAAkB5L,GAClB6L,GAZad,GAAiBC,YAGlBP,OAAqB,OAAd5M,QAAc,IAAdA,OAAc,EAAdA,EAAgBiO,YAAc,GAWjDC,GAActB,OAAqB,OAAd5M,QAAc,IAAdA,OAAc,EAAdA,EAAgBC,aAAe+N,GAEpDG,GAAgB3V,UACpB,IACE,IAAK0V,IAAeA,IAAe,EAEjC,YADA1U,MAAM,kCAIR,MAAMsD,EAAU,CACdlD,OAAQ+N,KAAKyG,MAAMF,IACnBpU,SAAU,OAGN0C,QAAiB6R,EAAAA,EAAAA,IAAYvR,GAEvB,OAARN,QAAQ,IAARA,GAAAA,EAAU3C,KACZuS,GAAgB5P,EAAS3C,MAEzBL,MAAM,oCAEV,CAAE,MAAOmJ,GACP9L,QAAQ8L,MAAM,wBAAyBA,GACvCnJ,MAAM,oCACR,GAMI8U,KAHWvX,EAAAA,EAAAA,OAGFwX,EAAAA,EAAAA,IAAU,CACvBC,cAAe,CACbtU,KAAM+P,EAAKwE,UAAY,GACvBrU,MAAO6P,EAAK7P,OAAS,GACrBE,YAAa,KAAK2P,EAAK3P,eAAiB,IAE1CiQ,mBACAmE,oBAAoB,EACpBC,SAAWC,IAET,GAAKvC,GAKL,IAAII,EAAAA,EAAAA,MACF0B,SACK,CACL,MAAMrR,EAAU,CACd5C,KAAM0U,EAAO1U,KACbE,MAAOwU,EAAOxU,MACd6H,MAAO2M,EAAOtU,YAAYuU,MAAM,KAElCC,EAAAA,EAAAA,IAAQhS,GACLmB,MAAM5B,IAAS,IAAD6B,EACbrH,QAAQC,IAAIuF,GACZ4P,IAAgB,IAChBvK,EAAAA,EAAAA,IAAM,8CACNyK,GAAW,CACTlK,MAAO2M,EAAOtU,YAAYuU,MAAM,GAChC3U,KAAM0U,EAAO1U,KACbE,MAAOwU,EAAOxU,MACdwJ,MAAU,OAAHvH,QAAG,IAAHA,GAAS,QAAN6B,EAAH7B,EAAKxC,YAAI,IAAAqE,OAAN,EAAHA,EAAWrE,MAClB,IAEH0H,OAAOC,IACN3K,QAAQC,IAAI0K,EAAI,GAEtB,MA3BEE,EAAAA,GAAMiB,MAAM,sDA2Bd,KASEoM,IAAmB5K,EAAAA,EAAAA,QAAuB,OACzC6K,GAAaC,KAAkB/X,EAAAA,EAAAA,UAAS,SA4B/C6N,EAAAA,EAAAA,YAAU,KACJgK,GAAiB5J,SACnB8J,GAAe,GAAGF,GAAiB5J,QAAQ+J,iBAC7C,GACC,CAAChS,IAID0P,OAAqB,OAAd5M,QAAc,IAAdA,OAAc,EAAdA,EAAgBG,aACvByM,OAAqB,OAAd5M,QAAc,IAAdA,OAAc,EAAdA,EAAgBmC,UACvByK,OAAqB,OAAd5M,QAAc,IAAdA,OAAc,EAAdA,EAAgBiO,WAH1B,MAIMkB,GAAavC,OAAqB,OAAd5M,QAAc,IAAdA,OAAc,EAAdA,EAAgBC,aAAe+N,GAUzD,OACE1W,EAAAA,EAAAA,MAACiO,EAAAA,EAAG,CACF5N,GAAI,IACCyX,EAAAA,GACHvM,WAAY,UACZ8D,GAAI,EACJ2D,GAAI,EACJlE,GAAI,CAAER,GAAI,EAAGC,GAAI,GACjB3N,QAAS,OACTmX,cAAe,CAAEzJ,GAAI,SAAUC,GAAI,OACnC1N,eAAgB,SAChBmX,IAAK,QACLjY,SAAA,EAGFD,EAAAA,EAAAA,KAACmY,EAAAA,EAAI,CACH5X,GAAI,CACFwO,EAAG,EACHtD,WAAY,QACZpL,SAAU,QACVuL,OAAQ,OACRyC,UAAW,EACX5N,aAAc,QACdR,UAEFC,EAAAA,EAAAA,MAACkY,EAAAA,EAAW,CAAAnY,SAAA,EACVD,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CACTpD,QAAQ,KACR6M,cAAY,EACZ9X,GAAI,CAAEW,MAAOA,EAAAA,EAAMwK,WAAYqH,WAAY,QAAS9S,SACrD,0BAIDC,EAAAA,EAAAA,MAACiO,EAAAA,EAAG,CACF5N,GAAI,CACFO,QAAS,OACTmX,cAAe,CAAEzJ,GAAI,SAAUC,GAAI,OACnCyJ,IAAK,CAAE1J,GAAI,EAAGC,GAAI,GAClBzC,SAAU,WACVuD,GAAI,EACJlD,OAAQ,cACRiM,WAAY,WACZrY,SAAA,EAEFD,EAAAA,EAAAA,KAACuY,EAAAA,EAAS,CACRC,UAAU,MACVjY,GAAI,CACF6L,MAAO,CAAEoC,GAAI,OAAQC,GAAI,SACzBhO,aAAc,OACdgY,UAAW,QACXpM,OAAQuL,GACR/L,WAAY,oBAEd6M,MAAY,OAAL5S,QAAK,IAALA,GAAqB,QAAhB+N,EAAL/N,EAAO6S,sBAAc,IAAA9E,OAAhB,EAALA,EAAwB,MAEjC3T,EAAAA,EAAAA,MAAA,OAAKW,MAAO,CAAEwL,OAAQ,eAAiBuM,IAAKjB,GAAiB1X,SAAA,EAC3DD,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CACTrO,GAAI,CACFoL,SAAU,OACVoH,WAAY,IACZ7R,MAAOA,EAAAA,EAAMwK,WACb6D,GAAI,CAAEf,GAAI,IAAKC,GAAI,GACnB3N,QAAS,cACTwN,SAAU,SACVuK,aAAc,WACdC,gBAAiB,EACjBC,gBAAiB,YACjB9Y,SAEI,OAAL6F,QAAK,IAALA,OAAK,EAALA,EAAOY,gBAEV1G,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CACTrO,GAAI,CACF8R,WAAY,eACZ1G,SAAU,CAAE6C,GAAI,OAAQC,GAAI,QAC5B3N,QAAS,cACTwN,SAAU,SACVuK,aAAc,WACdC,gBAAiB,EACjBC,gBAAiB,YACjB9Y,SAEI,OAAL6F,QAAK,IAALA,OAAK,EAALA,EAAO6E,WAGVzK,EAAAA,EAAAA,MAAA,OACEW,MAAO,CACLmY,UAAW,OACXlY,QAAS,OACTmY,SAAU,OACVhB,cAAe,SACfC,IAAK,OACLjY,SAAA,CAEe,WAAhBqG,GACCpG,EAAAA,EAAAA,MAAAgZ,EAAAA,SAAA,CAAAjZ,SAAA,EACEC,EAAAA,EAAAA,MAAC0O,EAAAA,EAAU,CAACrO,GAAI4Y,EAAUlZ,SAAA,EACxBD,EAAAA,EAAAA,KAAA,UAAAC,SAAQ,cAAmB,IAC1BqJ,IAAM+K,GAAazJ,OAAO,eAAe,IAAE,IAC3CwJ,EACG9K,IAAM8K,EAAa,SAASxJ,OAAO,WACnC,OAEN1K,EAAAA,EAAAA,MAAC0O,EAAAA,EAAU,CAACrO,GAAI4Y,EAAUlZ,SAAA,EACxBD,EAAAA,EAAAA,KAAA,UAAAC,SAAQ,eACPwU,EAAgB,cAIrBvU,EAAAA,EAAAA,MAAAgZ,EAAAA,SAAA,CAAAjZ,SAAA,EACEC,EAAAA,EAAAA,MAAC0O,EAAAA,EAAU,CAACrO,GAAI4Y,EAAUlZ,SAAA,EACxBD,EAAAA,EAAAA,KAAA,UAAAC,SAAQ,cAAkB,IAAEqJ,IAAM+K,GAAazJ,OAAO,mBAExD1K,EAAAA,EAAAA,MAAC0O,EAAAA,EAAU,CAACrO,GAAI4Y,EAAUlZ,SAAA,EACxBD,EAAAA,EAAAA,KAAA,UAAAC,SAAQ,eAAmB,IAAEqJ,IAAMlD,GAAcwE,OAAO,sBAK9D1K,EAAAA,EAAAA,MAAC0O,EAAAA,EAAU,CAACrO,GAAI4Y,EAAUlZ,SAAA,EACxBD,EAAAA,EAAAA,KAAA,UAAAC,SAAQ,eAAmB,IAAM,OAAJ8T,QAAI,IAAJA,OAAI,EAAJA,EAAMqF,iBAErClZ,EAAAA,EAAAA,MAAC0O,EAAAA,EAAU,CAACrO,GAAI4Y,EAAUlZ,SAAA,EACxBD,EAAAA,EAAAA,KAAA,UAAAC,SAAQ,gBACP+K,EAAM,UAAQxE,EAAO,YAAUvG,EAAS,yBAOjDC,EAAAA,EAAAA,MAAA,QAAMqX,SAAUL,GAAOmC,aAAapZ,SAAA,EAClCD,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CACTpD,QAAQ,KACR+D,GAAI,EACJhP,GAAI,CAAEW,MAAOA,EAAAA,EAAMwK,WAAYqH,WAAY,QAAS9S,SACrD,uBAIDD,EAAAA,EAAAA,KAACsZ,EAAAA,GAAe,CACdC,MAAM,aACNzW,KAAK,OACLxC,WAAS,EACTkZ,OAAO,SACPzJ,MAAOmH,GAAOM,OAAO1U,KACrBkN,SAAUkH,GAAOuC,aACjBC,OAAQxC,GAAOyC,WACfpO,MAAO2L,GAAO0C,QAAQ9W,MAAQ+W,QAAQ3C,GAAO4C,OAAOhX,SAGtD5C,EAAAA,EAAAA,MAACiO,EAAAA,EAAG,CAACoB,GAAI,EAAEtP,SAAA,EACTD,EAAAA,EAAAA,KAAC+Z,IAAU,CACTC,QAAS,KACTjK,MAAOmH,GAAOM,OAAOtU,YACrB8M,SAAWD,GAAUmH,GAAO+C,cAAc,cAAelK,GACzD2J,OAAQA,IAAMxC,GAAOgD,gBAAgB,eAAe,GACpDC,WAAY,CACV/N,MAAO,OACPC,OAAQ,OACR5L,aAAc,OACdmL,OAAQ,OACRyC,UAAW,wCACXnN,MAAOA,EAAAA,EAAMwK,WACb0O,YAAa,OACbzO,SAAU,OACV0O,gBAAiB,QACjBxO,WAAY,0BAEdyO,YAAa,CACX7Z,aAAc,gBACd+Y,OAAQ,MACRa,gBAAiB,SAEnBE,eAAgB,CACdnO,MAAO,UAGV8K,GAAO0C,QAAQ1W,aAAegU,GAAO4C,OAAO5W,cAC3ClD,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CACTrO,GAAI,CACFW,MAAO,MACPyK,SAAU,OACV4D,GAAI,GACJL,GAAI,QACJjP,SAEDiX,GAAO4C,OAAO5W,kBAKrBlD,EAAAA,EAAAA,KAACsZ,EAAAA,GAAe,CACdC,MAAM,2BACNzW,KAAK,QACLxC,WAAS,EACTkZ,OAAO,SACPzJ,MAAOmH,GAAOM,OAAOxU,MACrBgN,SAAUkH,GAAOuC,aACjBC,OAAQxC,GAAOyC,WACfpO,MAAO2L,GAAO0C,QAAQ5W,OAAS6W,QAAQ3C,GAAO4C,OAAO9W,UAIvDhD,EAAAA,EAAAA,KAACmO,EAAAA,EAAG,CAAC5N,GAAI,CAAEgP,GAAI,GAAItP,UACjBD,EAAAA,EAAAA,KAACwa,EAAAA,EAAgB,CACfC,SACEza,EAAAA,EAAAA,KAAC0a,EAAAA,EAAQ,CACPC,QAAS1F,GACTjF,SAAWtC,GAAMwH,GAAgBxH,EAAEoD,OAAO6J,SAC1CzZ,MAAM,YAGVqY,OACErZ,EAAAA,EAAAA,MAAA,QAAAD,SAAA,CAAM,eACS,KACbD,EAAAA,EAAAA,KAAA,QACEa,MAAO,CAAEK,MAAOA,EAAAA,EAAMwK,WAAYkP,OAAQ,UAAWC,eAAgB,aACrE1Z,QAASA,IAAMiU,IAAa,GAAMnV,SACnC,+BASRoV,EAAAA,EAAAA,OACCrV,EAAAA,EAAAA,KAAC8a,EAAAA,EAAY,CACXtP,QAAQ,YACRtK,MAAM,UACNZ,WAAS,EACTC,GAAI,CAAEgP,GAAI,GACVyC,KAAK,SACL+I,UAAW9F,GAAahV,SACzB,aAIDD,EAAAA,EAAAA,KAAC8a,EAAAA,EAAY,CACXtP,QAAQ,YACRtK,MAAM,UACNZ,WAAS,EACTC,GAAI,CAAEgP,GAAI,GACVyC,KAAK,SACL+I,UAAW9F,GAAahV,SACzB,wBAKHD,EAAAA,EAAAA,KAACgb,EAAa,CACZpb,KAAMgV,EACNxU,QAASA,IAAMyU,IAAgB,GAC/BtI,sBAvTa0O,KACvBpG,IAAgB,GAChBkC,IAAe,EAsTLlM,MAAOiK,GAAQjK,MACf/H,KAAMgS,GAAQhS,KACdE,MAAO8R,GAAQ9R,MACfwJ,MAAOsI,GAAQtI,QAIhBjN,KACCS,EAAAA,EAAAA,KAACkb,EAAc,CACb3b,aAAcA,GACdiD,OAAQuV,GACRvY,eAAgB,CACdsG,QACAiO,OACAhR,UAAWmU,GAAOM,OAClBtR,OA/TciV,MAC5B,GAAoB,WAAhB7U,GAA4B8N,GAAeK,EAAiB,CAC9D,MAAM2G,EAAkB9R,IAAM,GAAG+K,KAAeD,KAC1CiH,EAAmBD,EAAgBE,IAAI7G,EAAiB,QAE9D,MAAO,CACLxO,YAAamV,EAAgBxQ,OAAO,eACpCzE,YAAaiV,EAAgBxQ,OAAO,WACpCxE,aAAciV,EAAiBzQ,OAAO,eACtCvE,aAAcgV,EAAiBzQ,OAAO,WACtC2Q,SAAU,GAAG9G,QAEjB,CACE,MAAO,CACLxO,YAAaqD,IAAM+K,GAAazJ,OAAO,eACvCzE,YAAa,WACbC,aAAckD,IAAMlD,GAAcwE,OAAO,eACzCvE,aAAc,WACdkV,SACEjS,IAAMlD,GAAcoV,KAAKlS,IAAM+K,GAAc,OAC7C,EACA,YAEN,EAwSsB8G,GACRvS,iBACAtC,cACA0E,QACAxE,SACAvG,uBASZD,EAAAA,EAAAA,KAACmY,EAAAA,EAAI,CACH5X,GAAI,CACFwO,EAAG,EACHtD,WAAY,QACZG,OAAQ,OACRyC,UAAW,EACX5N,aAAc,OACd4L,OAAQ,eACRpM,UAEFC,EAAAA,EAAAA,MAACkY,EAAAA,EAAW,CAAAnY,SAAA,EACVD,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CACTpD,QAAQ,KACR6M,cAAY,EACZ9X,GAAI,CAAEW,MAAOA,EAAAA,EAAMwK,WAAYqH,WAAY,QAAS9S,SACrD,uBAIDC,EAAAA,EAAAA,MAAA,OACEW,MAAO,CACLmY,UAAW,OACXlY,QAAS,OACTmY,SAAU,OACVhB,cAAe,SACfC,IAAK,MACLI,WAAY,YACZrY,SAAA,EAGFD,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CACTrO,GAAI,CACFoL,SAAU,OACVzK,MAAOA,EAAAA,EAAMua,WACbZ,eAAgB,eAChB9H,WAAY,IACZ2I,QAAS,KACTzb,SAEDqW,GAAc,EAAI,UAAKC,GAAmBoF,QAAQ,KAAO,SAI5D3b,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CACTrO,GAAI,CACFoL,SAAU,OACVzK,MAAOA,EAAAA,EAAMwK,WACbqH,WAAY,QACZ9S,SAEDuW,GAA8B,EAAI,UAAKA,GAA4BmF,QAAQ,KAAO,YAIrF3b,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CACTrO,GAAI,CACFoL,SAAU,OACVzK,MAAOA,EAAAA,EAAMua,WACbxJ,UAAW,SACXhS,SAEDwW,GAAiB,GAAKC,GAAqB,GAC1CxW,EAAAA,EAAAA,MAAAgZ,EAAAA,SAAA,CAAAjZ,SAAA,CAAE,SACE0W,GAAgBgF,QAAQ,GAAG,mBAG/B,YAGJ3b,EAAAA,EAAAA,KAAC4b,EAAAA,EAAO,CAACrb,GAAI,CAAE6L,MAAO,OAAQmD,GAAI,MAGlCvP,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CACTrO,GAAI,CACFoL,SAAU,OACVzK,MAAOA,EAAAA,EAAMwK,WACbqH,WAAY,OACZ9S,SAED2W,GAAe,EAAI,iBAAYA,GAAa+E,QAAQ,KAAO,iBAOpEzb,EAAAA,EAAAA,MAACC,EAAAA,EAAM,CAACP,KAAMuV,GAAW/U,QAASA,IAAMgV,IAAa,GAAQ/U,SAAS,KAAKC,WAAS,EAAAL,SAAA,EAClFD,EAAAA,EAAAA,KAACU,EAAAA,EAAW,CAAAT,SAAC,wBACbC,EAAAA,EAAAA,MAACS,EAAAA,EAAa,CAAAV,SAAA,EACZD,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CAACpD,QAAQ,QAAQjL,GAAI,CAAEsb,WAAY,YAAa5b,SA9XjD,8QAiYVD,EAAAA,EAAAA,KAAC4O,EAAAA,EAAU,CACTpD,QAAQ,QACRjL,GAAI,CACFW,MAAOA,EAAAA,EAAMwK,WACbmP,eAAgB,YAChBD,OAAQ,UACR7H,WAAY,KAEd5R,QAASA,IAAMe,OAAOtC,KAAK,2BAA4B,UAAUK,SAClE,uCAIHD,EAAAA,EAAAA,KAACY,EAAAA,EAAa,CAAAX,UACZD,EAAAA,EAAAA,KAACgB,EAAAA,EAAM,CACLG,QAASA,KACPiU,IAAa,EAAM,EACnBnV,SACH,iBAKD,EAMJkZ,EAAY,CAChB1Y,aAAc,OACd4N,UAAW,wCACXnN,MAAOA,EAAAA,EAAMwK,WACbD,WAAY,QACZE,SAAU,CAAE6C,GAAI,OAAQC,GAAI,QAC5BrC,MAAO,cACP2C,EAAG,EACHC,GAAI,EACJH,GAAI,E","sources":["components/Payments/RanderPayments.tsx","pages/Account/LoginOtpModal.tsx","pages/BookingSummary.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { bookingConfirm, createHotelPayment, createMyPayment, postBooking, verifyPayment } from \"../../services/services\";\r\nimport { R_KEY_ID } from \"../../services/Secret\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n} from \"@mui/material\";\r\nimport color from \"../color\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getUserId, getUserName } from \"../../services/axiosClient\";\r\nimport dayjs from \"dayjs\";\r\n\r\ninterface BookingDetails {\r\n    hotel: any;\r\n    room: any;\r\n    guestInfo: {\r\n        name: string;\r\n        email: string;\r\n        phoneNumber: string;\r\n    };\r\n    timing: {\r\n        checkInDate: string;\r\n        checkInTime: string;\r\n        checkOutDate: string;\r\n        checkOutTime: string;\r\n        duration: string;\r\n    };\r\n    pricingDetails: any;\r\n    bookingType: string | null;\r\n    rooms: string | null;\r\n    adults: string | null;\r\n    children: string | null;\r\n}\r\n\r\ninterface RenderRazorpayProps {\r\n    orderDetails: any;\r\n    amount: any;\r\n    bookingDetails: BookingDetails;\r\n\r\n}\r\n\r\n\r\nconst RenderRazorpay: React.FC<RenderRazorpayProps> = ({\r\n    orderDetails,\r\n    // amount,\r\n    bookingDetails\r\n\r\n}) => {\r\n    console.log(bookingDetails)\r\n\r\n\r\n    const navigate = useNavigate();\r\n    const [open, setOpen] = useState(true);\r\n\r\n    const loadScript = (src: string): Promise<boolean> =>\r\n        new Promise((resolve) => {\r\n            const script = document.createElement(\"script\");\r\n            script.src = src;\r\n            script.onload = () => resolve(true);\r\n            script.onerror = () => resolve(false);\r\n            document.body.appendChild(script);\r\n        });\r\n\r\n    const displayRazorpay = async () => {\r\n        const isScriptLoaded = await loadScript(\"https://checkout.razorpay.com/v1/checkout.js\");\r\n        if (!isScriptLoaded || !(window as any).Razorpay) {\r\n            alert(\"Failed to load Razorpay SDK.\");\r\n            return;\r\n        }\r\n\r\n        // if (!isScriptLoaded) {\r\n        //     alert(\r\n        //         \"Failed to load Razorpay SDK. Please check your internet connection.\"\r\n        //     );\r\n        //     return;\r\n        // }\r\n\r\n        // if (!(window as any).Razorpay) {\r\n        //     alert(\"Razorpay SDK is not available. Try reloading the page.\");\r\n        //     return;\r\n        // }\r\n\r\n        // console.log(orderDetails)\r\n        const options = {\r\n            key: R_KEY_ID || \"\",\r\n            amount: orderDetails.data.amount,\r\n            currency: orderDetails.data.currency,\r\n            order_id: orderDetails.data.id,\r\n            prefill: {\r\n                name: bookingDetails?.guestInfo?.name,\r\n                email: bookingDetails?.guestInfo?.email,\r\n                contact: bookingDetails?.guestInfo?.phoneNumber,\r\n            },\r\n            handler: async (response: any) => {\r\n                try {\r\n                    const res = await verifyPayment({\r\n                        orderId: response.razorpay_order_id,\r\n                        paymentId: response.razorpay_payment_id,\r\n                        signature: response.razorpay_signature,\r\n                    });\r\n                    console.log(res);\r\n                    alert(\"Payment Successful\");\r\n                    const payLoad = {\r\n                        userId: getUserId(),\r\n                        hotelId: bookingDetails?.hotel?.id,\r\n                        geustName: bookingDetails?.guestInfo?.name,\r\n                        amountPaid: orderDetails.data.amount,\r\n                        checkInDate: bookingDetails?.timing?.checkInDate,\r\n                        checkInTime: bookingDetails?.timing?.checkInTime,\r\n                        checkOutDate: bookingDetails?.timing?.checkOutDate,\r\n                        checkOutTime: bookingDetails?.timing?.checkOutTime,\r\n                        bookingType: bookingDetails?.bookingType,\r\n                        geustDetails: bookingDetails?.guestInfo,\r\n                        adults: bookingDetails?.adults,\r\n                        children: bookingDetails?.children,\r\n                        hotelName: bookingDetails?.hotel?.propertyName,\r\n                        status: 'pending',\r\n                        paymentId: res?.data?.data?.id\r\n                    }\r\n                    console.log(payLoad)\r\n\r\n\r\n                    postBooking(payLoad).then((res) => {\r\n                        const payoutPayLoad = {\r\n                            userId: getUserId(),\r\n                            paymentId: res?.data?.data?.id,\r\n                            hotelId: bookingDetails?.hotel?.id,\r\n                            bookingId: res?.data?.data?.id,                   // integer (FK)\r\n                            amountPaise: bookingDetails?.pricingDetails?.totalPrice * 100,             // ₹2,500.00 -> 250000 paise\r\n                            feePaise: (bookingDetails?.pricingDetails?.platformFee + bookingDetails?.pricingDetails?.gstOnPlatform) * 100,                 // platform/gateway total fees -> 250.00 -> 25000 paise\r\n                            netAmountPaise: (bookingDetails?.pricingDetails?.basePrice + bookingDetails?.pricingDetails?.gstOnBase) * 100,          // amountPaise - feePaise -> 2250.00 -> 225000 paise\r\n                            currency: \"INR\",\r\n                            bookingsIncluded: [\r\n                                res?.data?.data?.id\r\n                            ],\r\n                            scheduledAt: dayjs(bookingDetails?.timing?.checkInDate, \"DD MMM YYYY\").toDate(),\r\n                            status: \"pending\",\r\n                            transactionRef: null,\r\n                            gatewayResponse: null,\r\n                            failureReason: null,\r\n                            processedBy: null,\r\n                            note: \"Daily PayOut \",\r\n                        };\r\n\r\n                        // Example payload for a payment attempt (gateway)\r\n                        const mypaymentPayload = {\r\n                            userId: getUserId(),\r\n                            paymentId: res?.data?.data?.id,\r\n                            hotelId: bookingDetails?.hotel?.id,\r\n                            bookingId: res?.data?.data?.id,\r\n\r\n                            // amounts in paise\r\n                            amountPaise: bookingDetails?.pricingDetails?.totalPrice * 100,        // ₹2250.00 gross\r\n                            feePaise: (bookingDetails?.pricingDetails?.platformFee + bookingDetails?.pricingDetails?.gstOnPlatform) * 100,            // ₹250.00 fee\r\n                            netmyAmountPaise: (bookingDetails?.pricingDetails?.platformFee + bookingDetails?.pricingDetails?.gstOnPlatform) * 100,   // ₹2000.00 net to vendor\r\n\r\n                            currency: \"INR\",\r\n\r\n                            bookingsIncluded: [res?.data?.data?.id],   // array of booking IDs\r\n                            scheduledAt: dayjs(bookingDetails?.timing?.checkInDate, \"DD MMM YYYY\").toDate(),\r\n                            initiatedAt: new Date(),          // JS Date object\r\n                            processedAt: null,                // will fill after payment gateway finishes\r\n\r\n                            status: \"pending\",                // pending | processing | completed | failed | cancelled\r\n\r\n                            transactionRef: null,             // will fill after gateway\r\n                            gatewayResponse: null,            // store raw gateway JSON later\r\n                            failureReason: null,\r\n\r\n                            processedBy: null,                // admin user ID if needed\r\n                            note: \"Auto payout settlement\",   // optional\r\n                        };\r\n                        createMyPayment(mypaymentPayload).then((res) => {\r\n                            console.log(\"My Payment is scheduled\");\r\n                        }).catch((err) => {\r\n                            console.log(\"error while creating the mypayment\", err)\r\n                        })\r\n                        createHotelPayment(payoutPayLoad).then((res) => {\r\n                            console.log(\"My Payout is scheduled\");\r\n                        }).catch((err) => {\r\n                            console.log(\"error while creating the PayOut \", err);\r\n                        })\r\n\r\n                        toast(res?.data?.msg)\r\n                    }).catch((err) => {\r\n                        console.log(err);\r\n                    })\r\n\r\n                    const messagetamplet = {\r\n                        guestName: bookingDetails?.guestInfo?.name,\r\n                        location: bookingDetails?.hotel?.address,\r\n                        hotelName: bookingDetails?.hotel?.propertyName,\r\n                        checkInDate: dayjs(bookingDetails?.timing?.checkInDate, \"DD MMM YYYY\").format(\"DD MMM YYYY\"),\r\n                        checkInTime: bookingDetails?.timing?.checkInTime,\r\n                        phone: bookingDetails?.guestInfo?.phoneNumber, // send full E.164, don't substring\r\n                        amountPaid: (bookingDetails?.pricingDetails?.basePrice + bookingDetails?.pricingDetails?.gstOnBase),\r\n                        basePrice: bookingDetails?.pricingDetails?.basePrice,\r\n                        gstOnBase: bookingDetails?.pricingDetails?.gstOnBase,\r\n                        razorpayfee: (bookingDetails?.pricingDetails?.gstTotal - (bookingDetails?.pricingDetails?.gstOnBase + bookingDetails?.pricingDetails?.gstOnPlatform)),\r\n                        platformFee: bookingDetails?.pricingDetails?.platformFee,\r\n                        gstOnPlatform: bookingDetails?.pricingDetails?.gstOnPlatform,\r\n                        totalPrice: bookingDetails?.pricingDetails?.totalPrice,\r\n                        adults: bookingDetails?.adults,\r\n                        children: bookingDetails?.children,\r\n                        rooms: 1,\r\n                        checkOutTime: bookingDetails?.timing?.checkOutTime,\r\n                        checkOutDate: dayjs(bookingDetails?.timing?.checkOutDate, \"DD MMM YYYY\").format(\"DD MMM YYYY\"),\r\n                        hotelEmail: bookingDetails?.hotel?.receptionEmail,\r\n                        receptionistPhone: bookingDetails?.hotel?.receptionMobile,\r\n                    };\r\n\r\n                    console.log(messagetamplet)\r\n                    bookingConfirm(messagetamplet).then((res) => {\r\n                        console.log(\"message send to the wp\", res)\r\n                    }).catch((err) => {\r\n                        console.log(err)\r\n                    })\r\n                    window.location.href = \"/my-bookings\";\r\n\r\n\r\n                } catch (error) {\r\n                    alert(\"Payment verification failed. Please try again.\");\r\n                }\r\n            },\r\n        };\r\n\r\n        const razorpay = new (window as any).Razorpay(options);\r\n        razorpay.open();\r\n    };\r\n\r\n    const handleOpen = () => setOpen(true);\r\n    const handleClose = () => setOpen(false);\r\n\r\n    return (\r\n        <div>\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClose}\r\n                maxWidth=\"xs\"\r\n                fullWidth\r\n                sx={{\r\n                    \"& .MuiPaper-root\": {\r\n                        padding: \"8px\",\r\n                        borderRadius: \"16px\",\r\n                    },\r\n                }}\r\n            >\r\n                <DialogTitle>Complete Your Payment</DialogTitle>\r\n                <DialogContent>\r\n                    <p>Ensure your payment details are correct before proceeding.</p>\r\n                </DialogContent>\r\n                <DialogActions style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                    <Button\r\n                        style={{\r\n                            textTransform: \"none\",\r\n                            color: \"black\",\r\n                        }}\r\n                        onClick={handleClose}\r\n                    >\r\n                        Cancel\r\n                    </Button>\r\n                    <Button\r\n                        onClick={displayRazorpay}\r\n                        variant=\"contained\"\r\n                        style={{\r\n                            background: color.firstColor,\r\n                            fontSize: \"18px\",\r\n                            textTransform: \"none\",\r\n                            border: \"solid 1px white\",\r\n                        }}\r\n                        sx={{\r\n                            padding: \"2px 10px\",\r\n                            transition: \"all 0.4s ease\",\r\n                            \"&:hover\": {\r\n                                paddingRight: \"20px\",\r\n                            },\r\n                        }}\r\n                    >\r\n                        Proceed to Pay\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RenderRazorpay;\r\n","/* LoginOtpModal.tsx */\r\nimport { Edit } from \"@mui/icons-material\";\r\nimport { Box, Button, Grid, Modal, TextField, Typography } from \"@mui/material\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport \"react-phone-input-2/lib/material.css\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport color from \"../../components/color\";\r\nimport { verifyOTP } from \"../../services/services\";\r\nimport \"./Login.css\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  setCurrentAccessToken,\r\n  setCurrentUser,\r\n} from \"../../services/axiosClient\";\r\n\r\ninterface LoginOtpModalProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onVerificationSuccess: () => void;\r\n  phone: string;\r\n  name: string;\r\n  email: string;\r\n  token: string;\r\n}\r\n\r\nconst LoginOtpModal = ({\r\n  open,\r\n  onClose,\r\n  onVerificationSuccess,\r\n  phone,\r\n  name,\r\n  email,\r\n  token,\r\n}: LoginOtpModalProps) => {\r\n  const [step] = useState(1);\r\n  const [otp, setOtp] = useState<string[]>(Array(4).fill(\"\"));\r\n  const otpLength = 4;\r\n\r\n  // stable refs array for inputs\r\n  const otpRefs = useRef<Array<HTMLInputElement | null>>([]);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  // Reuse your previous handleClose semantics (removes query params)\r\n  const handleClose = () => {\r\n    const searchParams = new URLSearchParams(location.search);\r\n\r\n    searchParams.delete(\"login\");\r\n    searchParams.delete(\"phone\");\r\n    searchParams.delete(\"name\");\r\n    searchParams.delete(\"email\");\r\n    searchParams.delete(\"token\");\r\n\r\n    navigate(`${location.pathname}?${searchParams.toString()}`, {\r\n      replace: true,\r\n      state: { ...location.state },\r\n    });\r\n\r\n    // also call external onClose if provided\r\n    try {\r\n      onClose();\r\n    } catch (e) {\r\n      /* noop */\r\n    }\r\n  };\r\n\r\n  // Auto-focus first input when modal opens\r\n  useEffect(() => {\r\n    if (open) {\r\n      setTimeout(() => {\r\n        otpRefs.current[0]?.focus();\r\n        otpRefs.current[0]?.select();\r\n      }, 80);\r\n    }\r\n  }, [open]);\r\n\r\n  // handle input change (supports paste / multi-digit)\r\n  const handleOtpChange = (index: number, value: string) => {\r\n    // Accept digits only\r\n    const digits = value.replace(/\\D/g, \"\");\r\n    if (digits.length === 0) {\r\n      const newOtp = [...otp];\r\n      newOtp[index] = \"\";\r\n      setOtp(newOtp);\r\n      return;\r\n    }\r\n\r\n    // If user pasted or entered multiple digits, spread them\r\n    if (digits.length > 1) {\r\n      const newOtp = [...otp];\r\n      let p = index;\r\n      for (const ch of digits) {\r\n        if (p >= otpLength) break;\r\n        newOtp[p] = ch;\r\n        p++;\r\n      }\r\n      setOtp(newOtp);\r\n\r\n      const nextIndex = Math.min(index + digits.length, otpLength - 1);\r\n      setTimeout(() => {\r\n        otpRefs.current[nextIndex]?.focus();\r\n        otpRefs.current[nextIndex]?.select();\r\n      }, 50);\r\n      return;\r\n    }\r\n\r\n    // Single digit\r\n    const newOtp = [...otp];\r\n    newOtp[index] = digits;\r\n    setOtp(newOtp);\r\n\r\n    // Move focus to next input (small timeout keeps keyboard stable on mobile)\r\n    if (index < otpLength - 1) {\r\n      setTimeout(() => {\r\n        otpRefs.current[index + 1]?.focus();\r\n        otpRefs.current[index + 1]?.select();\r\n      }, 50);\r\n    }\r\n  };\r\n\r\n  // Keydown handler for Backspace / arrow navigation\r\n  // Accept both input and div keyboard events to satisfy MUI's types\r\n  const handleKeyDown = (\r\n    index: number,\r\n    e: React.KeyboardEvent<HTMLInputElement | HTMLDivElement>\r\n  ) => {\r\n    const key = e.key;\r\n\r\n    if (key === \"Backspace\") {\r\n      if (otp[index]) {\r\n        // clear current\r\n        const newOtp = [...otp];\r\n        newOtp[index] = \"\";\r\n        setOtp(newOtp);\r\n      } else if (index > 0) {\r\n        // move to previous and clear it\r\n        otpRefs.current[index - 1]?.focus();\r\n        const newOtp = [...otp];\r\n        newOtp[index - 1] = \"\";\r\n        setOtp(newOtp);\r\n      }\r\n    } else if (key === \"ArrowLeft\" && index > 0) {\r\n      otpRefs.current[index - 1]?.focus();\r\n    } else if (key === \"ArrowRight\" && index < otpLength - 1) {\r\n      otpRefs.current[index + 1]?.focus();\r\n    }\r\n  };\r\n\r\n\r\n  // Paste handler (paste to any box fills from that index)\r\n  const handlePaste = (e: React.ClipboardEvent<HTMLInputElement>, index: number) => {\r\n    e.preventDefault();\r\n    const pasted = e.clipboardData.getData(\"text/plain\").replace(/\\D/g, \"\");\r\n    if (!pasted) return;\r\n    const newOtp = [...otp];\r\n    let p = index;\r\n    for (const ch of pasted) {\r\n      if (p >= otpLength) break;\r\n      newOtp[p] = ch;\r\n      p++;\r\n    }\r\n    setOtp(newOtp);\r\n    const nextIndex = Math.min(index + pasted.length, otpLength - 1);\r\n    setTimeout(() => {\r\n      otpRefs.current[nextIndex]?.focus();\r\n      otpRefs.current[nextIndex]?.select();\r\n    }, 50);\r\n  };\r\n\r\n  const handleOtpSubmit = () => {\r\n    if (otp.join(\"\").length === otpLength) {\r\n      verifyOTP({\r\n        otp: otp.join(\"\"),\r\n        sessionId: token,\r\n        phone,\r\n        name,\r\n        email,\r\n      })\r\n        .then((res) => {\r\n          setCurrentAccessToken(res?.data?.data?.token);\r\n          setCurrentUser(res?.data?.data?.user);\r\n          toast.success(\"Verified successfully!\");\r\n          onVerificationSuccess(); // Call the success callback\r\n          onClose();\r\n        })\r\n        .catch((err) => {\r\n          toast.error(\"Verification failed\");\r\n        });\r\n    } else {\r\n      toast.error(\"Please enter the complete OTP\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal open={open} onClose={handleClose}>\r\n      <Box sx={modalStyle}>\r\n        <div\r\n          className=\"subscribe\"\r\n          style={{\r\n            background: color.background,\r\n            color: \"white\",\r\n            position: \"relative\",\r\n            boxShadow: \"-4px -4px 10px rgba(255, 255, 255, 0.36) inset\",\r\n            borderRadius: \"12px\",\r\n            overflow: \"hidden\",\r\n          }}\r\n        >\r\n          <Box\r\n            sx={{\r\n              background: \"url('/assets/footer.webp')\",\r\n              backgroundSize: { xs: \"70%\", md: \"70%\" },\r\n              backgroundRepeat: \"no-repeat\",\r\n              backgroundPosition: \"bottom left\",\r\n              position: \"absolute\",\r\n              top: 0,\r\n              left: 0,\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n            }}\r\n          ></Box>\r\n          <Typography variant=\"h6\">Enter OTP</Typography>\r\n          <Typography variant=\"body2\" sx={{ mb: 1 }}>\r\n            Sent to: +{phone}{\" \"}\r\n            <Button\r\n              size=\"small\"\r\n              onClick={() => handleClose()}\r\n              sx={{\r\n                color: color.firstColor,\r\n                background: color.thirdColor,\r\n                p: 0,\r\n                px: 1,\r\n                minWidth: 0,\r\n                ml: 1,\r\n                textTransform: \"none\",\r\n              }}\r\n            >\r\n              <Edit sx={{ fontSize: \"14px\" }}></Edit> Edit\r\n            </Button>\r\n          </Typography>\r\n\r\n          <Grid container spacing={1} justifyContent=\"center\" mt={3}>\r\n            {otp.map((_, index) => (\r\n              <Grid item key={index}>\r\n                <TextField\r\n                  inputRef={(el: HTMLInputElement | null) => (otpRefs.current[index] = el)}\r\n                  value={otp[index]}\r\n                  onChange={(e) => handleOtpChange(index, e.target.value)}\r\n                  onKeyDown={(e) => handleKeyDown(index, e)}\r\n                  onPaste={(e) => handlePaste(e as React.ClipboardEvent<HTMLInputElement>, index)}\r\n                  inputProps={{\r\n                    maxLength: 1,\r\n                    inputMode: \"numeric\",\r\n                    pattern: \"[0-9]*\",\r\n                    type: \"tel\",\r\n                    style: {\r\n                      textAlign: \"center\",\r\n                      fontSize: 18,\r\n                      borderColor: \"transparent\",\r\n                    },\r\n                  }}\r\n                  sx={{\r\n                    width: 48,\r\n                    bgcolor: color.thirdColor,\r\n                    borderRadius: 2,\r\n                    border: \"none\",\r\n                    outline: \"none\",\r\n                    boxShadow: \"none\",\r\n                    \"& fieldset\": {\r\n                      border: \"none\",\r\n                    },\r\n                    \"&:hover\": {\r\n                      bgcolor: \"#f5f5f5\",\r\n                    },\r\n                    \"& .MuiInputBase-input\": {\r\n                      color: color.firstColor,\r\n                      fontFamily: \"CustomFontB\",\r\n                      fontSize: \"20px\",\r\n                      padding: \"12px 8px\",\r\n                    },\r\n                  }}\r\n                  onFocus={(e) => {\r\n                    (e.target as HTMLInputElement).select();\r\n                  }}\r\n                />\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n\r\n          <Button\r\n            onClick={handleOtpSubmit}\r\n            type=\"button\"\r\n            sx={{\r\n              background: color.thirdColor,\r\n              color: color.firstColor,\r\n              fontSize: \"14px\",\r\n              fontWeight: \"bold\",\r\n              textTransform: \"none\",\r\n              m: \"auto\",\r\n              mt: 4,\r\n              width: \"100%\",\r\n              display: \"block\",\r\n              position: \"absolute\",\r\n              bottom: 0,\r\n              left: 0,\r\n              borderRadius: 0,\r\n              py: 2,\r\n              boxShadow: \"0px -6px 50px rgba(7, 7, 7, 0.11)\",\r\n            }}\r\n          >\r\n            Verify OTP\r\n          </Button>\r\n        </div>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst modalStyle = {\r\n  position: \"absolute\" as \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  maxWidth: 400,\r\n  width: \"90%\",\r\n  height: 240,\r\n  background: color.thirdColor,\r\n  borderRadius: \"12px\",\r\n  //   p: 4,\r\n};\r\n\r\nexport default LoginOtpModal;\r\n","/* eslint-disable jsx-a11y/img-redundant-alt */\r\nimport {\r\n  Box,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  Divider,\r\n  Typography,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n} from \"@mui/material\";\r\nimport dayjs from \"dayjs\";\r\nimport { useFormik } from \"formik\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport PhoneInput from \"react-phone-input-2\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport * as Yup from \"yup\";\r\nimport CustomButton from \"../components/CustomButton\";\r\nimport RenderRazorpay from \"../components/Payments/RanderPayments\";\r\nimport color from \"../components/color\";\r\nimport { BoxStyle, CustomTextField } from \"../components/style\";\r\nimport { isLoggedIn } from \"../services/axiosClient\";\r\nimport { createOrder, getProfile, sendOTP } from \"../services/services\";\r\nimport LoginOtpModal from \"./Account/LoginOtpModal\";\r\n\r\nconst bookingData = {\r\n  hotelName: \"Best Western Ashoka\",\r\n  location: \"Lakdi ka pool\",\r\n  rating: 4.3,\r\n  reviews: 130,\r\n  checkInDate: \"27 Feb 25\",\r\n  checkInTime: \"2:00 PM\",\r\n  checkOutDate: \"27 Feb 25\",\r\n  checkOutTime: \"5:00 PM\",\r\n  duration: \"3 Hours\",\r\n  roomInfo: \"1 Room, 2 Guests\",\r\n  roomPrice: \"700.00\",\r\n  roomName: \"Superior Double Room\",\r\n  guest: {\r\n    name: \"\",\r\n    email: \"\",\r\n  },\r\n};\r\n\r\nconst validationSchema = Yup.object({\r\n  name: Yup.string().required(\"Name is required\"),\r\n  email: Yup.string().email(\"Invalid email\").optional(),\r\n});\r\n\r\n// ---------------- new helper (gateway included) ----------------\r\nconst calculatePriceBreakdown = (basePrice: number) => {\r\n  const numericBase = Number(basePrice) || 0;\r\n\r\n  if (!numericBase || numericBase <= 0) {\r\n    return {\r\n      basePrice: 0,\r\n      platformFee: 0,\r\n      gstOnBase: 0,\r\n      gstOnPlatform: 0,\r\n      gstTotal: 0, // includes gateway\r\n      gatewayFee: 0,\r\n      finalPrice: 0,\r\n    };\r\n  }\r\n\r\n  // 5% GST on base\r\n  const gstOnBase = numericBase * 0.05;\r\n  // platform fee = 13% on (base + gstOnBase)\r\n  const platformFee = (numericBase + gstOnBase) * 0.13;\r\n  // 18% GST on platform fee\r\n  const gstOnPlatform = platformFee * 0.18;\r\n\r\n  // amount that gateway charges apply to\r\n  const amountBeforeGateway = numericBase + gstOnBase + platformFee + gstOnPlatform;\r\n  // gateway fee (2%)\r\n  const gatewayFee = amountBeforeGateway * 0.02;\r\n\r\n  // combined GST total (includes gateway fee as part of \"taxes & fees\")\r\n  const gstTotal = gstOnBase + gstOnPlatform + gatewayFee;\r\n\r\n  // final price includes gateway fee\r\n  const finalPrice = numericBase + platformFee + gstTotal;\r\n\r\n  return {\r\n    basePrice: numericBase,\r\n    platformFee,\r\n    gstOnBase,\r\n    gstOnPlatform,\r\n    gstTotal,\r\n    gatewayFee,\r\n    finalPrice,\r\n  };\r\n};\r\n// ---------------------------------------------------------------------------\r\n\r\nconst BookingSummary = () => {\r\n  const location = useLocation();\r\n  const hotel = location.state?.hotelData;\r\n  const room = location.state?.selectedRoom;\r\n  const selectedSlot = location.state?.selectedSlot;\r\n  const pricingDetails = location.state?.pricingDetails;\r\n  const queryParams = new URLSearchParams(location.search);\r\n\r\n  const bookingType = queryParams.get(\"bookingType\");\r\n  const checkinTime = queryParams.get(\"time\");\r\n  const checkinDate = queryParams.get(\"checkinDate\");\r\n  const checkOutDate = queryParams.get(\"checkOutDate\");\r\n  const rooms = queryParams.get(\"rooms\");\r\n  const adults = queryParams.get(\"adults\");\r\n  const children = queryParams.get(\"children\");\r\n\r\n  const value = selectedSlot?.slot;\r\n  const number = value?.match(/\\d+/)?.[0];\r\n  const extractedNumber = number ? parseInt(number, 10) : null;\r\n\r\n  const [user, setUser] = useState<any>({});\r\n  const [showOtpModal, setShowOtpModal] = useState(false);\r\n  const [otpData, setOtpData] = useState({\r\n    phone: \"\",\r\n    name: \"\",\r\n    email: \"\",\r\n    token: \"\",\r\n  });\r\n  const [orderDetails, setOrderDetails] = useState<any>(null);\r\n\r\n  // Terms & Conditions state\r\n  const [termsChecked, setTermsChecked] = useState(false);\r\n  const [termsOpen, setTermsOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn()) {\r\n      getProfile()\r\n        .then((res) => {\r\n          setUser(res?.data?.data);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  // Use pricingDetails if passed from previous screen, otherwise compute from room base\r\n  const roomBaseFromState = Number(pricingDetails?.basePrice) || 0;\r\n  const platformFromState = Number(pricingDetails?.platformFee) || 0;\r\n  const gstOnBaseFromState = Number(pricingDetails?.gstOnBase) || 0;\r\n  const gstOnPlatformFromState = Number(pricingDetails?.gstOnPlatform) || 0;\r\n  const gstTotalFromState = Number(pricingDetails?.gstTotal) || 0; // note: expects gstTotal already including gateway if provided\r\n  const finalFromState = Number(pricingDetails?.totalPrice) || 0;\r\n\r\n  // If pricingDetails exist, use them; else compute breakdown from the raw room base (if available)\r\n  const computedFromBase =\r\n    roomBaseFromState > 0\r\n      ? {\r\n        basePrice: roomBaseFromState,\r\n        platformFee: platformFromState,\r\n        gstOnBase: gstOnBaseFromState,\r\n        gstOnPlatform: gstOnPlatformFromState,\r\n        gstTotal: gstTotalFromState,\r\n        finalPrice: finalFromState,\r\n      }\r\n      : calculatePriceBreakdown(Number(room?.rateFor1Night || room?.rateFor3Hour || 0));\r\n\r\n  const roomBase = computedFromBase.basePrice;\r\n  const platformFee = computedFromBase.platformFee;\r\n  const gstOnBase = computedFromBase.gstOnBase;\r\n  const gstOnPlatform = computedFromBase.gstOnPlatform;\r\n  const gstTotal = computedFromBase.gstTotal; // now includes gateway\r\n  const finalTotal = computedFromBase.finalPrice;\r\n\r\n  // allow extraFees from pricingDetails if any\r\n  const extraFees = Number(pricingDetails?.extraFees) || 0;\r\n\r\n  // values to display (nights multiplier already handled in pricingDetails in your flow)\r\n  const displayBase = roomBase;\r\n  const displayBasePlus700 = displayBase + 700; // top struck-through\r\n  const displayCombinedBasePlatform = roomBase + platformFee; // main visible price (base + platform)\r\n  const displayGstBase = gstOnBase;\r\n  const displayGstPlatform = gstOnPlatform;\r\n  const displayGstTotal = gstTotal; // includes gateway fee now\r\n  const displayFinal = finalTotal + extraFees; // include extraFees if present\r\n\r\n  const totalAmount = Number(pricingDetails?.totalPrice) || displayFinal;\r\n\r\n  const handlePayment = async () => {\r\n    try {\r\n      if (!totalAmount || totalAmount <= 0) {\r\n        alert(\"Booking amount cannot be zero.\");\r\n        return;\r\n      }\r\n\r\n      const payLoad = {\r\n        amount: Math.round(totalAmount),\r\n        currency: \"INR\",\r\n      };\r\n\r\n      const response = await createOrder(payLoad);\r\n\r\n      if (response?.data) {\r\n        setOrderDetails(response.data);\r\n      } else {\r\n        alert(\"Payment failed. Please try again.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error during payment:\", error);\r\n      alert(\"Payment failed. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  // formik must be created after termsChecked exists so onSubmit can access termsChecked\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      name: user.userName || \"\",\r\n      email: user.email || \"\",\r\n      phoneNumber: `91${user.phoneNumber}` || \"\",\r\n    },\r\n    validationSchema,\r\n    enableReinitialize: true,\r\n    onSubmit: (values) => {\r\n      // Prevent submission if user hasn't accepted terms\r\n      if (!termsChecked) {\r\n        toast.error(\"Please accept Terms & Conditions before proceeding.\");\r\n        return;\r\n      }\r\n\r\n      if (isLoggedIn()) {\r\n        handlePayment();\r\n      } else {\r\n        const payLoad = {\r\n          name: values.name,\r\n          email: values.email,\r\n          phone: values.phoneNumber.slice(2),\r\n        };\r\n        sendOTP(payLoad)\r\n          .then((res) => {\r\n            console.log(res);\r\n            setShowOtpModal(true);\r\n            toast(\"Otp send Succesfully please verify the OTP\");\r\n            setOtpData({\r\n              phone: values.phoneNumber.slice(2),\r\n              name: values.name,\r\n              email: values.email,\r\n              token: res?.data?.data,\r\n            });\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    },\r\n  });\r\n\r\n  const handleOtpSuccess = () => {\r\n    setShowOtpModal(false);\r\n    handlePayment();\r\n  };\r\n\r\n  const textContainerRef = useRef<HTMLDivElement>(null);\r\n  const [imageHeight, setImageHeight] = useState(\"auto\");\r\n\r\n  const calculateCheckoutTime = () => {\r\n    if (bookingType === \"hourly\" && checkinTime && extractedNumber) {\r\n      const checkInDateTime = dayjs(`${checkinDate} ${checkinTime}`);\r\n      const checkOutDateTime = checkInDateTime.add(extractedNumber, \"hour\");\r\n\r\n      return {\r\n        checkInDate: checkInDateTime.format(\"DD MMM YYYY\"),\r\n        checkInTime: checkInDateTime.format(\"hh:mm A\"),\r\n        checkOutDate: checkOutDateTime.format(\"DD MMM YYYY\"),\r\n        checkOutTime: checkOutDateTime.format(\"hh:mm A\"),\r\n        duration: `${extractedNumber} hrs`,\r\n      };\r\n    } else {\r\n      return {\r\n        checkInDate: dayjs(checkinDate).format(\"DD MMM YYYY\"),\r\n        checkInTime: \"12.00 PM\",\r\n        checkOutDate: dayjs(checkOutDate).format(\"DD MMM YYYY\"),\r\n        checkOutTime: \"11.00 AM\",\r\n        duration:\r\n          dayjs(checkOutDate).diff(dayjs(checkinDate), \"day\") +\r\n          1 +\r\n          \" night(s)\",\r\n      };\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (textContainerRef.current) {\r\n      setImageHeight(`${textContainerRef.current.clientHeight}px`);\r\n    }\r\n  }, [hotel]);\r\n\r\n  // show a fallback grand total (keeps old semantics)\r\n  const feeAndGst =\r\n    (Number(pricingDetails?.platformFee) || platformFee) +\r\n    (Number(pricingDetails?.gstTotal) || gstTotal) +\r\n    (Number(pricingDetails?.extraFees) || 0);\r\n  const grandTotal = Number(pricingDetails?.totalPrice) || displayFinal;\r\n\r\n  // T&C modal content (replace with your actual policy text)\r\n  const termsText = `\r\nBy booking, you agree to the property's terms and conditions, cancellation policy, and house rules.\r\nYou also agree to follow Huts4u's official Terms & Conditions mentioned on the link below.\r\nPlease ensure you have read and understood all applicable policies.\r\n`;\r\n\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        ...BoxStyle,\r\n        background: \"#f6f6f6\",\r\n        mt: 0,\r\n        py: 4,\r\n        px: { xs: 1, md: 3 },\r\n        display: \"flex\",\r\n        flexDirection: { xs: \"column\", md: \"row\" },\r\n        justifyContent: \"center\",\r\n        gap: \"20px\",\r\n      }}\r\n    >\r\n      {/* LEFT: Booking + Guest Info */}\r\n      <Card\r\n        sx={{\r\n          p: 1,\r\n          background: \"white\",\r\n          maxWidth: \"700px\",\r\n          border: \"none\",\r\n          boxShadow: 0,\r\n          borderRadius: \"12px\",\r\n        }}\r\n      >\r\n        <CardContent>\r\n          <Typography\r\n            variant=\"h6\"\r\n            gutterBottom\r\n            sx={{ color: color.firstColor, fontWeight: \"bold\" }}\r\n          >\r\n            Your Booking Summary\r\n          </Typography>\r\n\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              flexDirection: { xs: \"column\", md: \"row\" },\r\n              gap: { xs: 0, md: 2 },\r\n              position: \"relative\",\r\n              mt: 2,\r\n              height: \"fit-content\",\r\n              alignItems: \"stretch\",\r\n            }}\r\n          >\r\n            <CardMedia\r\n              component=\"img\"\r\n              sx={{\r\n                width: { xs: \"100%\", md: \"250px\" },\r\n                borderRadius: \"12px\",\r\n                objectFit: \"cover\",\r\n                height: imageHeight,\r\n                transition: \"height 0.3s ease\",\r\n              }}\r\n              image={hotel?.propertyImages?.[0]}\r\n            />\r\n            <div style={{ height: \"fit-content\" }} ref={textContainerRef}>\r\n              <Typography\r\n                sx={{\r\n                  fontSize: \"20px\",\r\n                  fontWeight: 600,\r\n                  color: color.firstColor,\r\n                  mt: { xs: 1.5, md: 1 },\r\n                  display: \"-webkit-box\",\r\n                  overflow: \"hidden\",\r\n                  textOverflow: \"ellipsis\",\r\n                  WebkitLineClamp: 1,\r\n                  WebkitBoxOrient: \"vertical\",\r\n                }}\r\n              >\r\n                {hotel?.propertyName}\r\n              </Typography>\r\n              <Typography\r\n                sx={{\r\n                  fontFamily: \"CustomFontSB\",\r\n                  fontSize: { xs: \"12px\", md: \"14px\" },\r\n                  display: \"-webkit-box\",\r\n                  overflow: \"hidden\",\r\n                  textOverflow: \"ellipsis\",\r\n                  WebkitLineClamp: 1,\r\n                  WebkitBoxOrient: \"vertical\",\r\n                }}\r\n              >\r\n                {hotel?.address}\r\n              </Typography>\r\n\r\n              <div\r\n                style={{\r\n                  marginTop: \"10px\",\r\n                  display: \"flex\",\r\n                  flexWrap: \"wrap\",\r\n                  flexDirection: \"column\",\r\n                  gap: \"4px\",\r\n                }}\r\n              >\r\n                {bookingType === \"hourly\" ? (\r\n                  <>\r\n                    <Typography sx={typoStyle}>\r\n                      <strong>Check-In:</strong>{\" \"}\r\n                      {dayjs(checkinDate).format(\"DD MMM YYYY\")},{\" \"}\r\n                      {checkinTime\r\n                        ? dayjs(checkinTime, \"HH:mm\").format(\"hh:mm A\")\r\n                        : \"\"}\r\n                    </Typography>\r\n                    <Typography sx={typoStyle}>\r\n                      <strong>Duration: </strong>\r\n                      {extractedNumber} hrs\r\n                    </Typography>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Typography sx={typoStyle}>\r\n                      <strong>Check-In:</strong> {dayjs(checkinDate).format(\"DD MMM YYYY\")}\r\n                    </Typography>\r\n                    <Typography sx={typoStyle}>\r\n                      <strong>Check-Out:</strong> {dayjs(checkOutDate).format(\"DD MMM YYYY\")}\r\n                    </Typography>\r\n                  </>\r\n                )}\r\n\r\n                <Typography sx={typoStyle}>\r\n                  <strong>Room type:</strong> {room?.roomCategory}\r\n                </Typography>\r\n                <Typography sx={typoStyle}>\r\n                  <strong>Room Info: </strong>\r\n                  {rooms} Room, {adults} Adults, {children} Children\r\n                </Typography>\r\n              </div>\r\n            </div>\r\n          </Box>\r\n\r\n          {/* GUEST FORM */}\r\n          <form onSubmit={formik.handleSubmit}>\r\n            <Typography\r\n              variant=\"h6\"\r\n              mt={4}\r\n              sx={{ color: color.firstColor, fontWeight: \"bold\" }}\r\n            >\r\n              Guest Information\r\n            </Typography>\r\n\r\n            <CustomTextField\r\n              label=\"Guest Name\"\r\n              name=\"name\"\r\n              fullWidth\r\n              margin=\"normal\"\r\n              value={formik.values.name}\r\n              onChange={formik.handleChange}\r\n              onBlur={formik.handleBlur}\r\n              error={formik.touched.name && Boolean(formik.errors.name)}\r\n            />\r\n\r\n            <Box mt={1}>\r\n              <PhoneInput\r\n                country={\"in\"}\r\n                value={formik.values.phoneNumber}\r\n                onChange={(value) => formik.setFieldValue(\"phoneNumber\", value)}\r\n                onBlur={() => formik.setFieldTouched(\"phoneNumber\", true)}\r\n                inputStyle={{\r\n                  width: \"100%\",\r\n                  height: \"56px\",\r\n                  borderRadius: \"52px\",\r\n                  border: \"none\",\r\n                  boxShadow: \"4px 4px 10px rgba(104, 39, 184, 0.17)\",\r\n                  color: color.firstColor,\r\n                  paddingLeft: \"58px\",\r\n                  fontSize: \"16px\",\r\n                  backgroundColor: \"white\",\r\n                  transition: \"border-color 0.2s ease\",\r\n                }}\r\n                buttonStyle={{\r\n                  borderRadius: \"52px 0 0 52px\",\r\n                  margin: \"5px\",\r\n                  backgroundColor: \"white\",\r\n                }}\r\n                containerStyle={{\r\n                  width: \"100%\",\r\n                }}\r\n              />\r\n              {formik.touched.phoneNumber && formik.errors.phoneNumber && (\r\n                <Typography\r\n                  sx={{\r\n                    color: \"red\",\r\n                    fontSize: \"12px\",\r\n                    mt: 0.5,\r\n                    ml: \"14px\",\r\n                  }}\r\n                >\r\n                  {formik.errors.phoneNumber}\r\n                </Typography>\r\n              )}\r\n            </Box>\r\n\r\n            <CustomTextField\r\n              label=\"Email Address (Optional)\"\r\n              name=\"email\"\r\n              fullWidth\r\n              margin=\"normal\"\r\n              value={formik.values.email}\r\n              onChange={formik.handleChange}\r\n              onBlur={formik.handleBlur}\r\n              error={formik.touched.email && Boolean(formik.errors.email)}\r\n            />\r\n\r\n            {/* Terms acceptance checkbox */}\r\n            <Box sx={{ mt: 2 }}>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={termsChecked}\r\n                    onChange={(e) => setTermsChecked(e.target.checked)}\r\n                    color=\"primary\"\r\n                  />\r\n                }\r\n                label={\r\n                  <span>\r\n                    I accept the{\" \"}\r\n                    <span\r\n                      style={{ color: color.firstColor, cursor: \"pointer\", textDecoration: \"underline\" }}\r\n                      onClick={() => setTermsOpen(true)}\r\n                    >\r\n                      Terms & Conditions\r\n                    </span>\r\n                  </span>\r\n                }\r\n              />\r\n            </Box>\r\n\r\n            {/* disable buttons until terms are accepted */}\r\n            {isLoggedIn() ? (\r\n              <CustomButton\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                fullWidth\r\n                sx={{ mt: 2 }}\r\n                type=\"submit\"\r\n                disabled={!termsChecked}\r\n              >\r\n                Pay Now\r\n              </CustomButton>\r\n            ) : (\r\n              <CustomButton\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                fullWidth\r\n                sx={{ mt: 2 }}\r\n                type=\"submit\"\r\n                disabled={!termsChecked}\r\n              >\r\n                verify Phone & Pay\r\n              </CustomButton>\r\n            )}\r\n\r\n            <LoginOtpModal\r\n              open={showOtpModal}\r\n              onClose={() => setShowOtpModal(false)}\r\n              onVerificationSuccess={handleOtpSuccess}\r\n              phone={otpData.phone}\r\n              name={otpData.name}\r\n              email={otpData.email}\r\n              token={otpData.token}\r\n            />\r\n\r\n            {/* Razorpay */}\r\n            {orderDetails && (\r\n              <RenderRazorpay\r\n                orderDetails={orderDetails}\r\n                amount={grandTotal} // using actual total\r\n                bookingDetails={{\r\n                  hotel,\r\n                  room,\r\n                  guestInfo: formik.values,\r\n                  timing: calculateCheckoutTime(),\r\n                  pricingDetails,\r\n                  bookingType,\r\n                  rooms,\r\n                  adults,\r\n                  children,\r\n                }}\r\n              />\r\n            )}\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* RIGHT: BILL SUMMARY (UPDATED FORMAT) */}\r\n      <Card\r\n        sx={{\r\n          p: 1,\r\n          background: \"white\",\r\n          border: \"none\",\r\n          boxShadow: 0,\r\n          borderRadius: \"12px\",\r\n          height: \"fit-content\",\r\n        }}\r\n      >\r\n        <CardContent>\r\n          <Typography\r\n            variant=\"h6\"\r\n            gutterBottom\r\n            sx={{ color: color.firstColor, fontWeight: \"bold\" }}\r\n          >\r\n            Your Bill Summary\r\n          </Typography>\r\n\r\n          <div\r\n            style={{\r\n              marginTop: \"10px\",\r\n              display: \"flex\",\r\n              flexWrap: \"wrap\",\r\n              flexDirection: \"column\",\r\n              gap: \"8px\",\r\n              alignItems: \"flex-end\",\r\n            }}\r\n          >\r\n            {/* 1) Top struck-through bigger: base + 700 */}\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"16px\",\r\n                color: color.forthColor,\r\n                textDecoration: \"line-through\",\r\n                fontWeight: 600,\r\n                opacity: 0.95,\r\n              }}\r\n            >\r\n              {displayBase > 0 ? `₹ ${displayBasePlus700.toFixed(0)}` : \"---\"}\r\n            </Typography>\r\n\r\n            {/* 2) Main bold price = base + platform */}\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"24px\",\r\n                color: color.firstColor,\r\n                fontWeight: \"bold\",\r\n              }}\r\n            >\r\n              {displayCombinedBasePlatform > 0 ? `₹ ${displayCombinedBasePlatform.toFixed(0)}` : \"—\"}\r\n            </Typography>\r\n\r\n            {/* 3) GST breakdown: Base GST + Platform GST + Gateway = total GST */}\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"13px\",\r\n                color: color.forthColor,\r\n                textAlign: \"right\",\r\n              }}\r\n            >\r\n              {displayGstBase > 0 || displayGstPlatform > 0 ? (\r\n                <>\r\n                  ₹{displayGstTotal.toFixed(0)} taxes & fees\r\n                </>\r\n              ) : (\r\n                \"—\"\r\n              )}\r\n            </Typography>\r\n            <Divider sx={{ width: \"100%\", mt: 1 }} />\r\n\r\n            {/* 4) Final total */}\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"16px\",\r\n                color: color.firstColor,\r\n                fontWeight: \"700\",\r\n              }}\r\n            >\r\n              {displayFinal > 0 ? `Final: ₹ ${displayFinal.toFixed(0)}` : \"---\"}\r\n            </Typography>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Terms & Conditions Dialog */}\r\n      <Dialog open={termsOpen} onClose={() => setTermsOpen(false)} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>Terms & Conditions</DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"body2\" sx={{ whiteSpace: \"pre-line\" }}>\r\n            {termsText}\r\n          </Typography>\r\n          <Typography\r\n            variant=\"body2\"\r\n            sx={{\r\n              color: color.firstColor,\r\n              textDecoration: \"underline\",\r\n              cursor: \"pointer\",\r\n              fontWeight: 600\r\n            }}\r\n            onClick={() => window.open(\"https://huts4u.com/terms\", \"_blank\")}\r\n          >\r\n            Open Huts4u Terms & Conditions\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => {\r\n              setTermsOpen(false);\r\n            }}\r\n          >\r\n            Close\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default BookingSummary;\r\n\r\nconst typoStyle = {\r\n  borderRadius: \"52px\",\r\n  boxShadow: \"4px 4px 10px rgba(104, 39, 184, 0.17)\",\r\n  color: color.firstColor,\r\n  background: \"white\",\r\n  fontSize: { xs: \"12px\", md: \"14px\" },\r\n  width: \"fit-content\",\r\n  p: 1,\r\n  px: 2,\r\n  mb: 1,\r\n};\r\n"],"names":["_ref","orderDetails","bookingDetails","console","log","useNavigate","open","setOpen","useState","handleClose","_jsx","children","_jsxs","Dialog","onClose","maxWidth","fullWidth","sx","padding","borderRadius","DialogTitle","DialogContent","DialogActions","style","display","justifyContent","Button","textTransform","color","onClick","async","_bookingDetails$guest","_bookingDetails$guest2","_bookingDetails$guest3","src","Promise","resolve","script","document","createElement","onload","onerror","body","appendChild","window","Razorpay","alert","options","key","R_KEY_ID","amount","data","currency","order_id","id","prefill","name","guestInfo","email","contact","phoneNumber","handler","_bookingDetails$hotel","_bookingDetails$guest4","_bookingDetails$timin","_bookingDetails$timin2","_bookingDetails$timin3","_bookingDetails$timin4","_bookingDetails$hotel2","_res$data","_res$data$data","_bookingDetails$guest5","_bookingDetails$hotel5","_bookingDetails$hotel6","_bookingDetails$timin7","_bookingDetails$timin8","_bookingDetails$guest6","_bookingDetails$prici11","_bookingDetails$prici12","_bookingDetails$prici13","_bookingDetails$prici14","_bookingDetails$prici15","_bookingDetails$prici16","_bookingDetails$prici17","_bookingDetails$prici18","_bookingDetails$prici19","_bookingDetails$prici20","_bookingDetails$timin9","_bookingDetails$timin10","_bookingDetails$hotel7","_bookingDetails$hotel8","res","verifyPayment","orderId","response","razorpay_order_id","paymentId","razorpay_payment_id","signature","razorpay_signature","payLoad","userId","getUserId","hotelId","hotel","geustName","amountPaid","checkInDate","timing","checkInTime","checkOutDate","checkOutTime","bookingType","geustDetails","adults","hotelName","propertyName","status","postBooking","then","_res$data2","_res$data2$data","_bookingDetails$hotel3","_res$data3","_res$data3$data","_bookingDetails$prici","_bookingDetails$prici2","_bookingDetails$prici3","_bookingDetails$prici4","_bookingDetails$prici5","_res$data4","_res$data4$data","_bookingDetails$timin5","_res$data5","_res$data5$data","_bookingDetails$hotel4","_res$data6","_res$data6$data","_bookingDetails$prici6","_bookingDetails$prici7","_bookingDetails$prici8","_bookingDetails$prici9","_bookingDetails$prici10","_res$data7","_res$data7$data","_bookingDetails$timin6","_res$data8","payoutPayLoad","bookingId","amountPaise","pricingDetails","totalPrice","feePaise","platformFee","gstOnPlatform","netAmountPaise","basePrice","gstOnBase","bookingsIncluded","scheduledAt","dayjs","toDate","transactionRef","gatewayResponse","failureReason","processedBy","note","mypaymentPayload","netmyAmountPaise","initiatedAt","Date","processedAt","createMyPayment","catch","err","createHotelPayment","toast","msg","messagetamplet","guestName","location","address","format","phone","razorpayfee","gstTotal","rooms","hotelEmail","receptionEmail","receptionistPhone","receptionMobile","bookingConfirm","href","error","variant","background","firstColor","fontSize","border","transition","paddingRight","modalStyle","position","top","left","transform","width","height","thirdColor","onVerificationSuccess","token","step","otp","setOtp","Array","fill","otpRefs","useRef","navigate","useLocation","searchParams","URLSearchParams","search","delete","pathname","toString","replace","state","e","useEffect","setTimeout","_otpRefs$current$","_otpRefs$current$2","current","focus","select","Modal","Box","className","boxShadow","overflow","backgroundSize","xs","md","backgroundRepeat","backgroundPosition","Typography","mb","size","p","px","minWidth","ml","Edit","Grid","container","spacing","mt","map","_","index","item","TextField","inputRef","el","value","onChange","handleOtpChange","digits","length","newOtp","ch","nextIndex","Math","min","otpLength","_otpRefs$current$next","_otpRefs$current$next2","_otpRefs$current","_otpRefs$current2","target","onKeyDown","handleKeyDown","_otpRefs$current3","_otpRefs$current4","_otpRefs$current5","onPaste","handlePaste","preventDefault","pasted","clipboardData","getData","_otpRefs$current$next3","_otpRefs$current$next4","inputProps","maxLength","inputMode","pattern","type","textAlign","borderColor","bgcolor","outline","fontFamily","onFocus","handleOtpSubmit","join","verifyOTP","sessionId","setCurrentAccessToken","setCurrentUser","user","success","fontWeight","m","bottom","py","validationSchema","Yup","required","optional","BookingSummary","_location$state","_location$state2","_location$state3","_location$state4","_value$match","_hotel$propertyImages","hotelData","room","selectedRoom","selectedSlot","queryParams","get","checkinTime","checkinDate","slot","number","match","extractedNumber","parseInt","setUser","showOtpModal","setShowOtpModal","otpData","setOtpData","setOrderDetails","termsChecked","setTermsChecked","termsOpen","setTermsOpen","isLoggedIn","getProfile","roomBaseFromState","Number","platformFromState","gstOnBaseFromState","gstOnPlatformFromState","gstTotalFromState","finalFromState","computedFromBase","finalPrice","numericBase","gatewayFee","calculatePriceBreakdown","rateFor1Night","rateFor3Hour","roomBase","displayBase","displayBasePlus700","displayCombinedBasePlatform","displayGstBase","displayGstPlatform","displayGstTotal","displayFinal","extraFees","totalAmount","handlePayment","round","createOrder","formik","useFormik","initialValues","userName","enableReinitialize","onSubmit","values","slice","sendOTP","textContainerRef","imageHeight","setImageHeight","clientHeight","grandTotal","BoxStyle","flexDirection","gap","Card","CardContent","gutterBottom","alignItems","CardMedia","component","objectFit","image","propertyImages","ref","textOverflow","WebkitLineClamp","WebkitBoxOrient","marginTop","flexWrap","_Fragment","typoStyle","roomCategory","handleSubmit","CustomTextField","label","margin","handleChange","onBlur","handleBlur","touched","Boolean","errors","PhoneInput","country","setFieldValue","setFieldTouched","inputStyle","paddingLeft","backgroundColor","buttonStyle","containerStyle","FormControlLabel","control","Checkbox","checked","cursor","textDecoration","CustomButton","disabled","LoginOtpModal","handleOtpSuccess","RenderRazorpay","calculateCheckoutTime","checkInDateTime","checkOutDateTime","add","duration","diff","forthColor","opacity","toFixed","Divider","whiteSpace"],"sourceRoot":""}