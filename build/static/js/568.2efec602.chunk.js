"use strict";(self.webpackChunkhuts4u=self.webpackChunkhuts4u||[]).push([[568],{67568:(e,r,t)=>{t.r(r),t.d(r,{default:()=>w});var i=t(91794),s=t(98606),o=t(61596),n=t(94496),l=t(39336),a=t(68903),c=t(7353),d=t(83462),p=t(26600),x=t(35316),u=t(29347),m=t(11906),h=t(65043),j=t(33580),A=t(31716),g=t(67809),v=t(69995),f=t(73216),b=t(59628),y=t(57488),C=t(70579);const S={label:{fontWeight:"bold",color:"#333"},value:{color:"#555"}},k=["id","hotelId","createdAt","updatedAt","deleted","userId"],R=e=>null===e||void 0===e?"N/A":"object"===typeof e?JSON.stringify(e):Array.isArray(e)?e.length>0?e.join(", "):"N/A":e.toString(),w=()=>{var e,r;const[t,w]=(0,h.useState)(""),[z,I]=(0,h.useState)(!1),[O,E]=(0,h.useState)(null),{id:M}=(0,f.g)(),[T,W]=(0,h.useState)({}),[$,L]=(0,h.useState)([]);(0,h.useEffect)((()=>{(0,v.YT)({id:M,secondTable:"Room"}).then((e=>{var r;const t=Object.fromEntries(Object.entries((null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.data[0])||{}).filter((e=>{let[r]=e;return!k.includes(r)}))),i=Array.isArray(null===t||void 0===t?void 0:t.rooms)?t.rooms.map((e=>Object.fromEntries(Object.entries(e).filter((e=>{let[r]=e;return!k.includes(r)}))))):[];W({...t,rooms:i})})).catch((e=>console.log(e)))}),[M]);const N=e=>{"reject"!==e||t.trim()?(E(e),I(!0)):alert("Remark is required for rejection.")},Z=(0,f.Zp)();return(0,C.jsxs)(o.A,{elevation:3,sx:{p:3,m:3,borderRadius:"12px",backgroundColor:j.A.thirdColor,boxShadow:"0px 0px 14px rgba(0, 0, 0, 0.14)"},children:[(0,C.jsx)(n.A,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:"Property Application Preview"}),(0,C.jsx)(l.A,{sx:{mb:2}}),(0,C.jsxs)(a.Ay,{container:!0,spacing:2,children:[Object.entries(T).map((e=>{let[r,t]=e;return"rooms"!==r&&(0,C.jsxs)(a.Ay,{item:!0,xs:12,md:"propertyImages"===r?12:4,children:[(0,C.jsxs)(n.A,{sx:S.label,children:[r.replace(/([A-Z])/g," $1").trim().replace(/^./,(e=>e.toUpperCase())),":"]}),Array.isArray(t)?"propertyImages"===r?(0,C.jsx)(c.A,{display:"flex",flexWrap:"wrap",gap:1,mt:1,children:t.map(((e,t)=>"string"===typeof e?(0,C.jsx)("img",{src:e,alt:r,width:100,height:100,style:{borderRadius:8}},t):null))}):(0,C.jsx)(n.A,{sx:S.value,children:t.join(", ")}):"gstCertificate"===r||"panCard"===r?(0,C.jsx)(c.A,{mt:1,children:(0,C.jsx)("img",{src:t,alt:r,width:150,height:120,style:{borderRadius:8}})}):(0,C.jsx)(n.A,{sx:S.value,children:R(t)})]},r)})),(null===T||void 0===T||null===(e=T.rooms)||void 0===e?void 0:e.length)>0&&(0,C.jsx)(a.Ay,{item:!0,xs:12,children:(0,C.jsx)(n.A,{sx:S.label,children:"Rooms:"})}),null===T||void 0===T||null===(r=T.rooms)||void 0===r?void 0:r.map(((e,r)=>(0,C.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,C.jsxs)(o.A,{sx:{p:2,my:1,backgroundColor:j.A.thirdColor,boxShadow:"0px 0px 14px rgba(0, 0, 0, 0.14)",borderRadius:"12px"},children:[e.roomImage&&(0,C.jsx)(c.A,{mt:1,children:(0,C.jsx)("img",{src:e.roomImage,alt:"Room",width:200,height:150,style:{borderRadius:8}})}),Object.entries(e).map((e=>{let[r,t]=e;return(0,C.jsx)(c.A,{mb:1,children:(0,C.jsxs)(n.A,{sx:S.value,children:[(0,C.jsxs)("strong",{children:[r.replace(/([A-Z])/g," $1").trim(),":"]})," ",R(t)]})},r)}))]})},r)))]}),"Admin"===(0,b.uG)()&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(n.A,{mt:1,sx:S.label,children:"Remark:"}),(0,C.jsx)(g.XY,{sx:{"& .MuiInputBase-input":{resize:"vertical"},"& textarea":{resize:"vertical"},"& .MuiOutlinedInput-root":{"& fieldset":{border:"none",borderRadius:"12px"}},mt:2},fullWidth:!0,label:"Application Remark",multiline:!0,rows:4,onChange:e=>w(e.target.value)}),(0,C.jsx)(c.A,{mt:2,display:"flex",justifyContent:"flex-end",children:(0,C.jsx)(A.A,{variant:"contained",customStyles:{fontSize:"14px"},onClick:()=>{console.log("Submitting application with remark:",t)},children:"Submit"})}),(0,C.jsxs)(c.A,{sx:{width:"100%",display:"flex",gap:1},mt:4,children:[(0,C.jsxs)(A.A,{customStyles:{fontSize:"14px",background:"red",width:"100%"},variant:"contained",onClick:()=>N("reject"),children:["Reject ",(0,C.jsx)(i.A,{sx:{ml:1,fontSize:"18px"}})]}),(0,C.jsxs)(A.A,{customStyles:{fontSize:"14px",background:"green",width:"100%"},variant:"contained",onClick:()=>N("approve"),children:["Approve ",(0,C.jsx)(s.A,{sx:{ml:1,fontSize:"18px"}})]})]}),(0,C.jsxs)(d.A,{open:z,onClose:()=>I(!1),sx:{textAlign:"center"},children:["approve"===O?(0,C.jsx)(s.A,{sx:{margin:"auto",fontSize:"84px",color:"green",mt:2}}):(0,C.jsx)(i.A,{sx:{margin:"auto",fontSize:"84px",color:"red",mt:2}}),(0,C.jsx)(p.A,{sx:{fontSize:"20px",m:0,pb:1},children:"approve"===O?"Confirm Approval?":"Confirm Rejection?"}),(0,C.jsxs)(x.A,{sx:{fontSize:"14px"},children:["Are you sure you want to ",O," this application?"]}),(0,C.jsxs)(u.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[(0,C.jsx)(m.A,{sx:{textTransform:"none",background:"grey"},variant:"contained",onClick:()=>I(!1),children:"Cancel"}),(0,C.jsx)(m.A,{sx:{textTransform:"none",background:"approve"===O?"green":"red"},variant:"contained",onClick:()=>{if(!O)return;const e={status:"approve"===O?"Approved":"Reject",..."reject"===O&&{remarks:t.trim()}};(0,v.hI)(M,e).then((e=>{y.oR.success(`Application ${"approve"===O?"Approved":"Rejected"} successfully`),I(!1),Z(-1)})).catch((e=>{y.oR.error(`Error while ${"approve"===O?"approving":"rejecting"} application`)}))},children:"Confirm"})]})]})]})]})}},91794:(e,r,t)=>{t.d(r,{A:()=>o});var i=t(59662),s=t(70579);const o=(0,i.A)((0,s.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},98606:(e,r,t)=>{t.d(r,{A:()=>o});var i=t(59662),s=t(70579);const o=(0,i.A)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")}}]);
//# sourceMappingURL=568.2efec602.chunk.js.map